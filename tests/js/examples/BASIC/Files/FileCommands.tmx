{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"File commands",
  "author":"Peter Millican",
  "date":"31/08/2020",
  "time":"11:18:33",
  "code":"REM FileCommands\n\nCONST testFile1$ = \"testFile1$.txt\"\nCONST testFile2$ = \"testFile2$.txt\"\nCONST enquire% = 0\nCONST delete% = 1\nCONST create% = 2\nCONST recreate% = 3\nCONST tNotify% = 4\nCONST fNotify% = 16\nCONST tOnEntry% = 64\nCONST tOnExit% = 128\nOUTPUT(TRUE, CREAM, TRUE)\nPROCcheckFileAndDisplay(testFile1$)\nPROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\nWRITELN(\"\")\nPROCdeleteFileAndDisplay(testFile1$)\nIF CHECKFILE(testFile1$, create%) > 127 THEN\n  WRITELN(\"File \"\" + testFile1$ + \"\" has been created\")\nELSE\n  WRITELN(\"File \"\" + testFile1$ + \"\" could not be created\")\nENDIF\nPROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\nPROCshowResult(FILEEXISTS(testFile2$), \"FILEEXISTS(\" + testFile2$ + \")\")\nWRITELN(\"\")\nIF COPYFILE(testFile1$, testFile2$) THEN\n  WRITELN(\"File \"\" + testFile1$ + \"\" has been copied to \"\" + testFile2$ + \"\"\")\nELSE\n  WRITELN(\"File \"\" + testFile1$ + \"\" could not be copied to \"\" + testFile2$ + \"\"\")\nENDIF\nPROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\nPROCshowResult(FILEEXISTS(testFile2$), \"FILEEXISTS(\" + testFile2$ + \")\")\nWRITELN(\"\")\nIF CHECKFILE(testFile1$, delete%) < 128 THEN\n  WRITELN(\"File \"\" + testFile1$ + \"\" has been deleted\")\nELSE\n  WRITELN(\"File \"\" + testFile1$ + \"\" could not be deleted\")\nENDIF\nPROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\nWRITELN(\"\")\nPROCdeleteFileAndDisplay(testFile1$)\nPROCshowResult(FILEEXISTS(testFile2$), \"FILEEXISTS(\" + testFile2$ + \")\")\nIF RENAMEFILE(testFile2$, testFile1$) THEN\n  WRITELN(\"File \"\" + testFile2$ + \"\" has been renamed \"\" + testFile1$ + \"\"\")\nELSE\n  WRITELN(\"File \"\" + testFile2$ + \"\" could not be renamed\"\" + testFile1$ + \"\"\")\nENDIF\nPROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\nPROCshowResult(FILEEXISTS(testFile2$), \"FILEEXISTS(\" + testFile2$ + \")\")\nWRITELN(\"\")\nPROCdeleteFileAndDisplay(testFile1$)\nEND\n\nDEF PROCshowResult(value%, commandText$)\n  IF value% THEN\n    WRITELN(UCASE$(commandText$) + \" returns TRUE\")\n  ELSE\n    WRITELN(UCASE$(commandText$) + \" returns FALSE\")\n  ENDIF\nENDPROC\n\nDEF PROCcheckFileAndDisplay(filename$)\n  LOCAL code%\n  code% = create% + tNotify% + fNotify%\n  WRITELN(\"Code on entry = $\" + HEX$(code%, 2))\n  WRITELN(\"The initial CHECKFILE command will invoke a message window ...\")\n  code% = CHECKFILE(filename$, code%)\n  WRITELN(\"Code on exit = $\" + HEX$(code%, 2))\n  IF (code% AND tOnEntry%) > 0 THEN\n    WRITELN(\"File existed on entry\")\n  ELSE\n    WRITELN(\"No file on entry\")\n  ENDIF\n  IF (code% AND tOnExit%) > 0 THEN\n    WRITELN(\"File existed on exit\")\n  ELSE\n    WRITELN(\"No file on exit\")\n  ENDIF\n  WRITELN(\"\")\nENDPROC\n\nDEF PROCdeleteFileAndDisplay(filename$)\n  PROCshowResult(DELETEFILE(testFile1$), \"DELETEFILE(\" + testFile1$ + \")\")\n  PROCshowResult(FILEEXISTS(testFile1$), \"FILEEXISTS(\" + testFile1$ + \")\")\n  WRITELN(\"\")\nENDPROC",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"OUTPUT", "level":2, "count":1, "lines":"13"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"WRITELN", "level":1, "count":24, "lines":"56 58 65 66 68 70 72 75 77 79 85 16 19 21 25 27 29 33 35 37 40 44 46 50"},
        {"name":"UCASE$", "level":2, "count":2, "lines":"56 58"}
      ],
      "total":26
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"HEX$", "level":3, "count":2, "lines":"65 68"}
      ],
      "total":2
    },
    {
      "category": "File processing",
      "expressions":[
        {"name":"DELETEFILE", "level":2, "count":1, "lines":"83"},
        {"name":"CHECKFILE", "level":3, "count":3, "lines":"67 18 34"},
        {"name":"COPYFILE", "level":3, "count":1, "lines":"26"},
        {"name":"FILEEXISTS", "level":3, "count":10, "lines":"84 15 23 24 31 32 39 42 48 49"},
        {"name":"RENAMEFILE", "level":3, "count":1, "lines":"43"}
      ],
      "total":16
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":7, "lines":"55 69 74 18 26 34 43"},
        {"name":"ELSE", "level":1, "count":7, "lines":"57 71 76 20 28 36 45"},
        {"name":"DEF PROC", "level":2, "count":3, "lines":"54 62 82"}
      ],
      "total":17
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCshowResult", "level":0, "count":11, "lines":"83 84 15 23 24 31 32 39 42 48 49"},
        {"name":"PROCcheckFileAndDisplay", "level":0, "count":1, "lines":"14"},
        {"name":"PROCdeleteFileAndDisplay", "level":0, "count":3, "lines":"17 41 51"}
      ],
      "total":15
    }
  ],
  "pcode":[
    [112,15,1,1,112,0,123,112,6,2,123,4,112,6,124,112,21,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,37],
    [133,1],
    [139,12,36],
    [117,12,3,1,1,4,120,12,2,112,33,2,123,4,126,120,12,1],
    [114,12,1,129,10],
    [114,12,2,112,2,66,118,13,32,114,101,116,117,114,110,115,32,84,82,85,69,64,169,170,142],
    [128,11],
    [114,12,2,112,2,66,118,14,32,114,101,116,117,114,110,115,32,70,65,76,83,69,64,169,170,142],
    [140,12,134,132],
    [133,2],
    [139,13,36],
    [117,13,2,1,1,4,120,13,1,112,33,2,123,4,126],
    [112,2,112,4,26,112,16,26,120,13,36],
    [118,17,67,111,100,101,32,111,110,32,101,110,116,114,121,32,61,32,36,114,13,36,112,2,12,64,169,170,142],
    [118,62,84,104,101,32,105,110,105,116,105,97,108,32,67,72,69,67,75,70,73,76,69,32,99,111,109,109,97,110,100,32,119,105,108,108,32,105,110,118,111,107,101,32,97,32,109,101,115,115,97,103,101,32,119,105,110,100,111,119,32,46,46,46,169,170,142],
    [114,13,1,114,13,36,177,120,13,36],
    [118,16,67,111,100,101,32,111,110,32,101,120,105,116,32,61,32,36,114,13,36,112,2,12,64,169,170,142],
    [114,13,36,112,64,17,112,0,35,129,23],
    [118,21,70,105,108,101,32,101,120,105,115,116,101,100,32,111,110,32,101,110,116,114,121,169,170,142],
    [128,24],
    [118,16,78,111,32,102,105,108,101,32,111,110,32,101,110,116,114,121,169,170,142],
    [114,13,36,112,128,17,112,0,35,129,27],
    [118,20,70,105,108,101,32,101,120,105,115,116,101,100,32,111,110,32,101,120,105,116,169,170,142],
    [128,28],
    [118,15,78,111,32,102,105,108,101,32,111,110,32,101,120,105,116,169,170,142],
    [118,0,169,170,142],
    [140,13,134,132],
    [133,3],
    [139,14,35],
    [117,14,2,1,1,4,120,14,1,112,33,2,123,4,126],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,1,177,112,128,34,118,11,68,69,76,69,84,69,70,73,76,69,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [140,14,134,132],
    [112,-1,112,16777147,112,-1,166],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,142,131,12],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,142,131,30],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,2,177,112,127,35,142,129,45],
    [118,40,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,104,97,115,32,98,101,101,110,32,99,114,101,97,116,101,100,169,170,142],
    [128,46],
    [118,44,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,99,114,101,97,116,101,100,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,112,3,191,142,129,52],
    [118,61,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,104,97,115,32,98,101,101,110,32,99,111,112,105,101,100,32,116,111,32,34,32,43,32,116,101,115,116,70,105,108,101,50,36,32,43,32,34,169,170,142],
    [128,53],
    [118,65,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,99,111,112,105,101,100,32,116,111,32,34,32,43,32,116,101,115,116,70,105,108,101,50,36,32,43,32,34,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,1,177,112,128,34,142,129,59],
    [118,40,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,104,97,115,32,98,101,101,110,32,100,101,108,101,116,101,100,169,170,142],
    [128,60],
    [118,44,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,100,101,108,101,116,101,100,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,142,131,30],
    [118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,1,191,142,129,67],
    [118,59,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,50,36,32,43,32,34,32,104,97,115,32,98,101,101,110,32,114,101,110,97,109,101,100,32,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,169,170,142],
    [128,68],
    [118,62,70,105,108,101,32,34,32,43,32,116,101,115,116,70,105,108,101,50,36,32,43,32,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,114,101,110,97,109,101,100,34,32,43,32,116,101,115,116,70,105,108,101,49,36,32,43,32,34,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,112,0,177,112,127,35,118,11,70,73,76,69,69,88,73,83,84,83,40,118,14,116,101,115,116,70,105,108,101,50,36,46,116,120,116,64,118,1,41,64,142,131,4],
    [118,0,169,170,142],
    [118,14,116,101,115,116,70,105,108,101,49,36,46,116,120,116,142,131,30],
    [130]
  ]
}
