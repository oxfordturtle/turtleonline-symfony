{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"Renaming and deleting a file",
  "author":"Peter Millican",
  "date":"31/08/2020",
  "time":"11:18:32",
  "code":"REM RenameAndDeleteFile\n\nSTRINGSIZE 255\norigfname$ = \"TestFile.txt\"\nnewfname$ = \"TestRename.txt\"\nOUTPUT(TRUE, CREAM, TRUE)\nFOR i% = 1 TO 3\n  WRITELN(\"LOOP \" + STR$(i%) + \" ...\")\n  WRITELN(\"\")\n  WRITELN(\"ABOUT TO TRY TO READ \" + origfname$ + \" ...\")\n  PROCreadfile(origfname$)\n  WRITELN(\"\")\n  WRITELN(\"ABOUT TO TRY TO READ \" + newfname$ + \" ...\")\n  PROCreadfile(newfname$)\n  WRITELN(\"\")\n  IF i% = 1 THEN\n    WRITELN(\"RENAMING \" + origfname$ + \" TO \" + newfname$)\n    IF RENAMEFILE(origfname$, newfname$) THEN\n      WRITELN(\"  succeeded\")\n    ELSE\n      WRITELN(\"  failed\")\n    ENDIF\n    WRITELN(\"\")\n  ELSE\n    IF i% = 2 THEN\n      WRITELN(\"DELETING \" + newfname$)\n      IF DELETEFILE(newfname$) THEN\n        WRITELN(\"  file no longer exists\")\n      ELSE\n        WRITELN(\"  failed\")\n      ENDIF\n      WRITELN(\"\")\n    ENDIF\n  ENDIF\nNEXT\nEND\n\nDEF PROCreadfile(fname$)\n  LOCAL s$\n  handle% = OPENIN(fname$)\n  IF handle% > 0 THEN\n    WRITELN(\"Contents read from \" + fname$ + \":\")\n    WHILE NOT(EOF#(handle%))\n      s$ = FREADLN#(handle%)\n      WRITELN(\"  \" + s$)\n    ENDWHILE\n    CLOSE#(handle%)\n  ELSE\n    WRITELN(\"  \" + fname$ + \" could NOT be opened FOR reading\")\n  ENDIF\nENDPROC",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"OUTPUT", "level":2, "count":1, "lines":"6"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"WRITELN", "level":1, "count":17, "lines":"42 45 49 8 9 10 12 13 15 17 19 21 23 26 28 30 32"}
      ],
      "total":17
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"STR$", "level":1, "count":1, "lines":"8"}
      ],
      "total":1
    },
    {
      "category": "File processing",
      "expressions":[
        {"name":"CLOSE#", "level":2, "count":1, "lines":"47"},
        {"name":"DELETEFILE", "level":2, "count":1, "lines":"27"},
        {"name":"EOF#", "level":2, "count":1, "lines":"43"},
        {"name":"FREADLN#", "level":2, "count":1, "lines":"44"},
        {"name":"OPENIN", "level":2, "count":1, "lines":"40"},
        {"name":"RENAMEFILE", "level":3, "count":1, "lines":"18"}
      ],
      "total":6
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":5, "lines":"41 16 18 25 27"},
        {"name":"ELSE", "level":1, "count":4, "lines":"48 20 24 29"},
        {"name":"FOR", "level":1, "count":1, "lines":"7"},
        {"name":"WHILE", "level":2, "count":1, "lines":"43"},
        {"name":"DEF PROC", "level":2, "count":1, "lines":"38"}
      ],
      "total":12
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCreadfile", "level":0, "count":2, "lines":"11 14"}
      ],
      "total":2
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,524,124,112,537,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,22,119,20],
    [112,256,119,21],
    [116,280,119,278],
    [112,256,119,279],
    [128,23],
    [133,1],
    [139,12,516],
    [117,12,2,1,1,4,120,12,1,112,256,2,123,4,126],
    [117,12,261,120,12,259,112,256,120,12,260],
    [114,12,1,112,1,179,119,537],
    [113,537,112,0,35,129,21],
    [118,19,67,111,110,116,101,110,116,115,32,114,101,97,100,32,102,114,111,109,32,114,12,1,64,118,1,58,64,169,170,142],
    [113,537,182,16,129,19],
    [114,12,259,113,537,185,2,126,142],
    [118,2,32,32,114,12,259,64,169,170,142],
    [128,15],
    [113,537,180],
    [128,22],
    [118,2,32,32,114,12,1,64,118,32,32,99,111,117,108,100,32,78,79,84,32,98,101,32,111,112,101,110,101,100,32,70,79,82,32,114,101,97,100,105,110,103,64,169,170,142],
    [140,12,134,132],
    [113,20,118,12,84,101,115,116,70,105,108,101,46,116,120,116,2,126,142],
    [113,278,118,14,84,101,115,116,82,101,110,97,109,101,46,116,120,116,2,126,142],
    [112,-1,112,16777147,112,-1,166],
    [112,1],
    [119,536,112,3],
    [113,536,37,129,53],
    [118,5,76,79,79,80,32,113,536,11,64,118,4,32,46,46,46,64,169,170,142],
    [118,0,169,170,142],
    [118,21,65,66,79,85,84,32,84,79,32,84,82,89,32,84,79,32,82,69,65,68,32,113,20,64,118,4,32,46,46,46,64,169,170,142],
    [113,20,131,8],
    [118,0,169,170,142],
    [118,21,65,66,79,85,84,32,84,79,32,84,82,89,32,84,79,32,82,69,65,68,32,113,278,64,118,4,32,46,46,46,64,169,170,142],
    [113,278,131,8],
    [118,0,169,170,142],
    [113,536,112,1,32,129,45],
    [118,9,82,69,78,65,77,73,78,71,32,113,20,64,118,4,32,84,79,32,64,113,278,64,169,170,142],
    [113,20,113,278,112,1,191,129,42],
    [118,11,32,32,115,117,99,99,101,101,100,101,100,169,170,142],
    [128,43],
    [118,8,32,32,102,97,105,108,101,100,169,170,142],
    [118,0,169,170,142],
    [128,52],
    [113,536,112,2,32,129,52],
    [118,9,68,69,76,69,84,73,78,71,32,113,278,64,169,170,142],
    [113,278,112,1,177,112,128,34,129,50],
    [118,23,32,32,102,105,108,101,32,110,111,32,108,111,110,103,101,114,32,101,120,105,115,116,115,169,170,142],
    [128,51],
    [118,8,32,32,102,97,105,108,101,100,169,170,142],
    [118,0,169,170,142],
    [113,536,4,128,27],
    [130]
  ]
}
