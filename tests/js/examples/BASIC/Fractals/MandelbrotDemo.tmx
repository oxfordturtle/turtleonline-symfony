{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"Mandelbrot multi-colour",
  "author":"Peter Millican",
  "date":"31/08/2020",
  "time":"11:18:46",
  "code":"REM MandelbrotDemo\n\nCONST MAXCOL% = 40\nPROCstartprompt\nxstart% = DIVMULT(xcentre%, 1000000, scale%) - pixels% / 2\nystart% = DIVMULT(ycentre%, 1000000, scale%) - pixels% / 2\nxfinish% = xstart% + pixels% - 1\nyfinish% = ystart% + pixels% - 1\nWRITELN(\"Mandelbrot will be plotted over the following real range:\")\nWRITE(QSTR$(xstart%, scale%, 4) + \" < x < \" + QSTR$(xfinish%, scale%, 4) + \"    \")\nWRITELN(QSTR$(ystart%, scale%, 4) + \" < y < \" + QSTR$(yfinish%, scale%, 4))\nWRITELN(\"Scaling factor: \" + STR$(scale%) + \"    Image resolution: \" + STR$(pixels%) + \"x\" + STR$(pixels%))\nCANVAS(xstart%, ystart%, pixels%, pixels%)\nRESOLUTION(pixels%, pixels%)\nTIMESET(0)\nFOR a% = xstart% TO xfinish%\n  NOUPDATE\n  FOR b% = ystart% TO yfinish%\n    x% = a%\n    y% = b%\n    iterations% = 0\n    WHILE (HYPOT(x%, y%, 1) < 2 * scale%) AND (iterations% <= MAXCOL%)\n      temp% = DIVMULT(x% + y%, scale%, x% - y%)\n      y% = DIVMULT(2 * x%, scale%, y%) + b%\n      x% = temp% + a%\n      INC(iterations%)\n    ENDWHILE\n    IF iterations% > MAXCOL% THEN\n      PIXSET(a%, b%, BLACK)\n    ELSE\n      PIXSET(a%, b%, RGB(iterations% + 1))\n    ENDIF\n  NEXT\n  UPDATE\nNEXT\nWRITELN(\"Time taken: \" + QSTR$(TIME, 1000, 1) + \" seconds.\")\nEND\n\nDEF PROCstartprompt\n  OUTPUT(TRUE, CREAM, TRUE)\n  KEYECHO(FALSE)\n  WRITELN(\"MANDELBROT SET DISPLAY PROGRAM\")\n  WRITELN(\"\")\n  WRITE(\"Select Whole set, or Zoom on mini \"\"lake\"\" at -0.1592,-1.0330 (W/Z)\")\n  REPEAT\n  UNTIL (ABS(?KEY) = \\w) OR (ABS(?KEY) = \\z)\n  WRITELN(CHR$(ABS(?KEY)))\n  IF ABS(?KEY) = \\w THEN\n    xcentre% = -500000\n    ycentre% = 0\n  ELSE\n    xcentre% = -159200\n    ycentre% = -1033000\n  ENDIF\n  WRITELN(\"\")\n  IF ycentre% = 0 THEN\n    WRITE(\"Select Fast/Medium/Slow, giving resolution 300/750/1500: (F/M/S) \")\n  ELSE\n    WRITE(\"Select Fast/Medium/Slow, giving resolution 300/600/1200: (F/M/S) \")\n  ENDIF\n  REPEAT\n  UNTIL (ABS(?KEY) = \\f) OR (ABS(?KEY) = \\m) OR (ABS(?KEY) = \\s)\n  WRITELN(CHR$(ABS(?KEY)))\n  IF ycentre% = 0 THEN\n    IF ABS(?KEY) = \\f THEN\n      scale% = 100\n    ELSE\n      IF ABS(?KEY) = \\m THEN\n        scale% = 250\n      ELSE\n        scale% = 500\n      ENDIF\n    ENDIF\n    pixels% = scale% * 3\n  ELSE\n    IF ABS(?KEY) = \\f THEN\n      scale% = 10000\n    ELSE\n      IF ABS(?KEY) = \\m THEN\n        scale% = 20000\n      ELSE\n        scale% = 40000\n      ENDIF\n    ENDIF\n    pixels% = scale% / 100 * 3\n  ENDIF\n  OUTPUT(FALSE, WHITE, FALSE)\nENDPROC",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"OUTPUT", "level":2, "count":2, "lines":"40 87"},
        {"name":"RGB", "level":3, "count":1, "lines":"31"}
      ],
      "total":3
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"NOUPDATE", "level":1, "count":1, "lines":"17"},
        {"name":"UPDATE", "level":1, "count":1, "lines":"34"},
        {"name":"CANVAS", "level":2, "count":1, "lines":"13"},
        {"name":"RESOLUTION", "level":2, "count":1, "lines":"14"},
        {"name":"PIXSET", "level":3, "count":2, "lines":"29 31"}
      ],
      "total":6
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"ABS", "level":1, "count":12, "lines":"46 46 47 48 62 62 62 63 65 68 76 79"},
        {"name":"INC", "level":1, "count":1, "lines":"26"},
        {"name":"HYPOT", "level":2, "count":1, "lines":"22"},
        {"name":"DIVMULT", "level":3, "count":4, "lines":"5 6 23 24"}
      ],
      "total":18
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"WRITE", "level":1, "count":4, "lines":"44 57 59 10"},
        {"name":"WRITELN", "level":1, "count":9, "lines":"42 43 47 55 63 9 11 12 36"}
      ],
      "total":13
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"STR$", "level":1, "count":3, "lines":"12 12 12"},
        {"name":"QSTR$", "level":2, "count":5, "lines":"10 10 11 11 36"},
        {"name":"CHR$", "level":3, "count":2, "lines":"47 63"}
      ],
      "total":10
    },
    {
      "category": "Input and timing routines",
      "expressions":[
        {"name":"KEYECHO", "level":2, "count":1, "lines":"41"},
        {"name":"TIME", "level":2, "count":1, "lines":"36"},
        {"name":"TIMESET", "level":2, "count":1, "lines":"15"}
      ],
      "total":3
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":8, "lines":"48 56 64 65 68 76 79 28"},
        {"name":"ELSE", "level":1, "count":8, "lines":"51 58 67 70 75 78 81 30"},
        {"name":"FOR", "level":1, "count":2, "lines":"16 18"},
        {"name":"REPEAT", "level":2, "count":2, "lines":"45 61"},
        {"name":"WHILE", "level":2, "count":1, "lines":"22"},
        {"name":"DEF PROC", "level":2, "count":1, "lines":"39"}
      ],
      "total":22
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCstartprompt", "level":0, "count":1, "lines":"4"}
      ],
      "total":1
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,20,124,112,33,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,45],
    [133,1],
    [112,-1,112,16777147,112,-1,166],
    [112,0,165],
    [118,30,77,65,78,68,69,76,66,82,79,84,32,83,69,84,32,68,73,83,80,76,65,89,32,80,82,79,71,82,65,77,169,170,142],
    [118,0,169,170,142],
    [118,65,83,101,108,101,99,116,32,87,104,111,108,101,32,115,101,116,44,32,111,114,32,90,111,111,109,32,111,110,32,109,105,110,105,32,34,108,97,107,101,34,32,97,116,32,45,48,46,49,53,57,50,44,45,49,46,48,51,51,48,32,40,87,47,90,41,169,142],
    [112,-9,160,24,112,87,32,112,-9,160,24,112,90,32,18,129,10],
    [112,-9,160,24,9,169,170,142],
    [112,-9,160,24,112,87,32,129,16],
    [112,500000,23,119,30],
    [112,0,119,31],
    [128,18],
    [112,159200,23,119,30],
    [112,1033000,23,119,31],
    [118,0,169,170,142],
    [113,31,112,0,32,129,22],
    [118,65,83,101,108,101,99,116,32,70,97,115,116,47,77,101,100,105,117,109,47,83,108,111,119,44,32,103,105,118,105,110,103,32,114,101,115,111,108,117,116,105,111,110,32,51,48,48,47,55,53,48,47,49,53,48,48,58,32,40,70,47,77,47,83,41,32,169,142],
    [128,23],
    [118,65,83,101,108,101,99,116,32,70,97,115,116,47,77,101,100,105,117,109,47,83,108,111,119,44,32,103,105,118,105,110,103,32,114,101,115,111,108,117,116,105,111,110,32,51,48,48,47,54,48,48,47,49,50,48,48,58,32,40,70,47,77,47,83,41,32,169,142],
    [112,-9,160,24,112,70,32,112,-9,160,24,112,77,32,18,112,-9,160,24,112,83,32,18,129,23],
    [112,-9,160,24,9,169,170,142],
    [113,31,112,0,32,129,35],
    [112,-9,160,24,112,70,32,129,29],
    [112,100,119,32],
    [128,33],
    [112,-9,160,24,112,77,32,129,32],
    [112,250,119,32],
    [128,33],
    [112,500,119,32],
    [113,32,112,3,28,119,33],
    [128,43],
    [112,-9,160,24,112,70,32,129,38],
    [112,10000,119,32],
    [128,42],
    [112,-9,160,24,112,77,32,129,41],
    [112,20000,119,32],
    [128,42],
    [112,40000,119,32],
    [113,32,112,100,29,112,3,28,119,33],
    [112,0,112,16777215,112,0,166],
    [134,132],
    [131,4],
    [113,30,112,1000000,113,32,48,113,33,112,2,29,27,119,20],
    [113,31,112,1000000,113,32,48,113,33,112,2,29,27,119,21],
    [113,20,113,33,26,112,1,27,119,22],
    [113,21,113,33,26,112,1,27,119,23],
    [118,57,77,97,110,100,101,108,98,114,111,116,32,119,105,108,108,32,98,101,32,112,108,111,116,116,101,100,32,111,118,101,114,32,116,104,101,32,102,111,108,108,111,119,105,110,103,32,114,101,97,108,32,114,97,110,103,101,58,169,170,142],
    [113,20,113,32,112,4,14,118,7,32,60,32,120,32,60,32,64,113,22,113,32,112,4,14,64,118,4,32,32,32,32,64,169,142],
    [113,21,113,32,112,4,14,118,7,32,60,32,121,32,60,32,64,113,23,113,32,112,4,14,64,169,170,142],
    [118,16,83,99,97,108,105,110,103,32,102,97,99,116,111,114,58,32,113,32,11,64,118,22,32,32,32,32,73,109,97,103,101,32,114,101,115,111,108,117,116,105,111,110,58,32,64,113,33,11,64,118,1,120,64,113,33,11,64,169,170,142],
    [113,20,113,21,113,33,113,33,144],
    [113,33,113,33,145],
    [112,0,173],
    [113,20],
    [119,24,113,22],
    [113,24,37,129,80],
    [112,0,146],
    [113,21],
    [119,25,113,23],
    [113,25,37,129,78],
    [113,24,119,26],
    [113,25,119,27],
    [112,0,119,28],
    [113,26,113,27,112,1,50,112,2,113,32,28,34,113,28,112,40,36,17,129,73],
    [113,26,113,27,26,113,32,113,26,113,27,27,48,119,29],
    [112,2,113,26,28,113,32,113,27,48,113,25,26,119,27],
    [113,29,113,24,26,119,26],
    [116,28,1,122,4,2,123],
    [128,67],
    [113,28,112,40,35,129,76],
    [113,24,113,25,112,0,100],
    [128,77],
    [113,24,113,25,113,28,112,1,26,101,100],
    [113,25,4,128,62],
    [112,-1,146],
    [113,24,4,128,58],
    [118,12,84,105,109,101,32,116,97,107,101,110,58,32,172,112,1000,112,1,14,64,118,9,32,115,101,99,111,110,100,115,46,64,169,170,142],
    [130]
  ]
}
