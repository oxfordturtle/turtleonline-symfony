{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"Painting application",
  "author":"Peter Millican",
  "date":"28/07/2020",
  "time":"13:23:53",
  "code":"PROGRAM PaintApp;\nVAR brushwidth: integer;\n    brushcolour: integer;\n\n Procedure setbrushwidth(wdth: integer);\n Var count: integer;\n Begin\n  brushwidth:=wdth;\n  noupdate;\n  colour(black);\n  for count:=0 to 4 do\n   begin\n    setxy(625+count*50,875);\n    blot(8+count*2)\n   end;\n  colour(brushcolour);\n  recolour(((brushwidth+16)*25)+25,875,lightred);\n  update\n End;\n\n Procedure setbrushcolour(clr: integer);\n Begin\n  brushcolour:=clr;\n  colour(clr);\n  setxy(975,875);\n  blot(16)\n End;\n\n Procedure paintbrush(x: integer;y: integer);\n Begin\n  setxy(x,y);\n  blot(brushwidth)\n End;\n\n Procedure paintcan(x: integer;y: integer);\n Begin\n  recolour(x,y,brushcolour)\n End;\n\n Procedure setup;\n Var count: integer;\n\n  procedure square(col: integer);\n  begin\n   movexy(50,0);\n   movexy(0,50);\n   movexy(-50,0);\n   movexy(0,-50);\n   colour(col);\n   polygon(4)\n  end;\n\n Begin\n  colour(lightred);\n  setxy(0,850);\n  drawxy(1000,0);\n  setxy(0,900);\n  drawxy(1000,0);\n  setxy(450,850);\n  drawxy(0,50);\n  setxy(850,850);\n  drawxy(0,50);\n  colour(black);\n  setxy(10,858);\n  print('Left-click to draw, right-click to fill',0,20);\n  setxy(450+10,858);\n  print('Brush width:',0,20);\n  setxy(850+10,858);\n  print('Colour:',0,20);\n  setxy(0,900);\n  for count:=1 to 20 do\n   begin\n    square(rgb(count));\n    movexy(0,50);\n    square(rgb(count+30));\n    movexy(50,-50)\n   end;\n  setbrushwidth(8);\n  setbrushcolour(black)\n End;\n\nBEGIN\n setup;\n repeat\n  if ?lmouse>0 then\n   begin\n    if ?mousey>900 then\n     setbrushcolour(pixcol(?mousex,?mousey))\n    else\n    if (?mousey>850) and ((?mousex>600) and (?mousex<850)) then\n     setbrushwidth(((?mousex div 50)*2)-16)\n    else\n    if ?mousey<850-brushwidth then\n     paintbrush(?mousex,?mousey)\n   end;\n  if (?rmouse>0) and (?mousey<850) then\n   paintcan(?mousex,?mousey)\n until false\nEND.",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"drawxy", "level":2, "count":4, "lines":"56 58 60 62"},
        {"name":"movexy", "level":2, "count":6, "lines":"45 46 47 48 74 76"}
      ],
      "total":10
    },
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"setxy", "level":1, "count":11, "lines":"13 25 31 55 57 59 61 64 66 68 70"}
      ],
      "total":11
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"blot", "level":1, "count":3, "lines":"14 26 32"},
        {"name":"polygon", "level":2, "count":1, "lines":"50"}
      ],
      "total":4
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"colour", "level":1, "count":6, "lines":"10 16 24 49 54 63"},
        {"name":"rgb", "level":3, "count":2, "lines":"73 75"}
      ],
      "total":8
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"noupdate", "level":1, "count":1, "lines":"9"},
        {"name":"update", "level":1, "count":1, "lines":"18"},
        {"name":"pixcol", "level":3, "count":1, "lines":"88"},
        {"name":"recolour", "level":3, "count":2, "lines":"17 37"}
      ],
      "total":5
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"print", "level":1, "count":3, "lines":"65 67 69"}
      ],
      "total":3
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":5, "lines":"85 87 90 93 96"},
        {"name":"else", "level":1, "count":2, "lines":"89 92"},
        {"name":"for", "level":1, "count":2, "lines":"11 71"},
        {"name":"repeat", "level":2, "count":1, "lines":"84"},
        {"name":"procedure", "level":2, "count":6, "lines":"5 21 29 35 40 43"}
      ],
      "total":16
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"square", "level":0, "count":2, "lines":"73 75"},
        {"name":"setbrushwidth", "level":0, "count":2, "lines":"78 91"},
        {"name":"setbrushcolour", "level":0, "count":2, "lines":"79 88"},
        {"name":"setup", "level":0, "count":1, "lines":"83"},
        {"name":"paintbrush", "level":0, "count":1, "lines":"94"},
        {"name":"paintcan", "level":0, "count":1, "lines":"97"}
      ],
      "total":9
    }
  ],
  "pcode":[
    [112,18,1,1,112,0,123,112,6,2,123,4,112,8,124,112,26,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,80],
    [133,1],
    [139,12,2],
    [117,12,1,112,2,124,120,12,1],
    [114,12,1,119,25],
    [112,0,146],
    [112,0,87],
    [112,0],
    [120,12,2,112,4],
    [114,12,2,37,129,16],
    [112,625,114,12,2,112,50,28,26,112,875,88],
    [112,8,114,12,2,112,2,28,26,108],
    [114,12,2,4,128,11],
    [113,26,87],
    [113,25,112,16,26,112,25,28,112,25,26,112,875,112,13458524,97],
    [112,-1,146],
    [140,12,134,132],
    [133,2],
    [139,13,1],
    [117,13,1,112,1,124,120,13,1],
    [114,13,1,119,26],
    [114,13,1,87],
    [112,975,112,875,88],
    [112,16,108],
    [140,13,134,132],
    [133,3],
    [139,14,2],
    [117,14,1,112,2,124,120,14,2,120,14,1],
    [114,14,1,114,14,2,88],
    [113,25,108],
    [140,14,134,132],
    [133,4],
    [139,15,2],
    [117,15,1,112,2,124,120,15,2,120,15,1],
    [114,15,1,114,15,2,113,26,97],
    [140,15,134,132],
    [133,6],
    [139,17,1],
    [117,17,1,112,1,124,120,17,1],
    [112,50,112,0,89],
    [112,0,112,50,89],
    [112,50,23,112,0,89],
    [112,0,112,50,23,89],
    [114,17,1,87],
    [112,4,106],
    [140,17,134,132],
    [133,5],
    [139,16,1],
    [117,16,1,112,1,124],
    [112,13458524,87],
    [112,0,112,850,88],
    [112,1000,112,0,90],
    [112,0,112,900,88],
    [112,1000,112,0,90],
    [112,450,112,850,88],
    [112,0,112,50,90],
    [112,850,112,850,88],
    [112,0,112,50,90],
    [112,0,87],
    [112,10,112,858,88],
    [118,39,76,101,102,116,45,99,108,105,99,107,32,116,111,32,100,114,97,119,44,32,114,105,103,104,116,45,99,108,105,99,107,32,116,111,32,102,105,108,108,112,0,112,20,168,142],
    [112,450,112,10,26,112,858,88],
    [118,12,66,114,117,115,104,32,119,105,100,116,104,58,112,0,112,20,168,142],
    [112,850,112,10,26,112,858,88],
    [118,7,67,111,108,111,117,114,58,112,0,112,20,168,142],
    [112,0,112,900,88],
    [112,1],
    [120,16,1,112,20],
    [114,16,1,37,129,77],
    [114,16,1,101,131,39],
    [112,0,112,50,89],
    [114,16,1,112,30,26,101,131,39],
    [112,50,112,50,23,89],
    [114,16,1,4,128,70],
    [112,8,131,4],
    [112,0,131,20],
    [140,16,134,132],
    [131,49],
    [112,-1,160,112,0,35,129,90],
    [112,-8,160,112,900,35,129,85],
    [112,-7,160,112,-8,160,99,131,20],
    [128,90],
    [112,-8,160,112,850,35,112,-7,160,112,600,35,112,-7,160,112,850,34,17,17,129,88],
    [112,-7,160,112,50,30,112,2,28,112,16,27,131,4],
    [128,90],
    [112,-8,160,112,850,113,25,27,34,129,90],
    [112,-7,160,112,-8,160,131,28],
    [112,-2,160,112,0,35,112,-8,160,112,850,34,17,129,92],
    [112,-7,160,112,-8,160,131,34],
    [112,0,129,81],
    [130]
  ]
}
