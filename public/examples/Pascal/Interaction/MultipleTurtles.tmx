{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"Multiple turtles and varying ANGLES",
  "author":"Peter Millican",
  "date":"23/07/2020",
  "time":"11:59:05",
  "code":"PROGRAM MultipleTurtles;\nCONST numturtles = 5;\n      x = 1;\n      y = 2;\n      d = 3;\n      a = 4;\n      t = 5;\n      c = 6;\nVAR turtles: array[1..numturtles, x..c] of integer;\n    i: integer;\n\n  Procedure setupturtles;\n  Var i: integer;\n  Begin\n    for i := 1 to numturtles do\n      begin\n        turtles[i, x] := 10000;\n        turtles[i, y] := 70000;\n        turtles[i, d] := 35 + i * 10;\n        turtles[i, a] := 360;\n        turtles[i, t] := 5 + i;\n        turtles[i, c] := rgb(i)\n      end\n  End;\n\n  Procedure menu;\n  Var i: integer;\n  Begin\n    for i := 1 to numturtles do\n      begin\n        setxy(5000, i * 10000);\n        colour(rgb(i));\n        blot(5000)\n      end\n  End;\n\n  Procedure handleclick;\n  Var col, i, thist: integer;\n  Begin\n    col := pixcol(?mousex, ?mousey);\n    thist := 0;\n    for i := 1 to numturtles do\n      if col = rgb(i) then\n        thist := i;\n    if thist > 0 then\n      begin\n        newturtle(turtles[thist]);\n        write('Turtle ' + str(thist) + ' changing direction,');\n        write('  from ' + str(turtles[thist, d]) + '/' + str(turtles[thist, a]));\n        angles(random(46) + 45);\n        writeln('  to ' + str(turtles[thist, d]) + '/' + str(turtles[thist, a]));\n        pause(200)\n      end\n  End;\n\nBEGIN\n  canvas(0, 0, 100000, 100000);\n  setxy(2500, 80000);\n  print('Click on a circle to alter the ANGLES setting', 0, 36);\n  setxy(2500, 86000);\n  print('of the corresponding turtle. Its direction will', 0, 36);\n  setxy(2500, 92000);\n  print('then change to the closest possible angle.', 0, 36);\n  for i := 1 to numturtles do\n    begin\n      setxy(10000, 70000);\n      direction(35 + i * 10);\n      forward(110000)\n    end;\n  menu;\n  setupturtles;\n  repeat\n    for i := 1 to numturtles do\n      begin\n        newturtle(turtles[i]);\n        forward(100)\n      end;\n    pause(50);\n    if ?click > 128 then\n      handleclick\n  until ?key = \\escape\nEND.",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"forward", "level":1, "count":2, "lines":"68 76"}
      ],
      "total":2
    },
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"direction", "level":1, "count":1, "lines":"67"},
        {"name":"setxy", "level":1, "count":5, "lines":"31 58 60 62 66"},
        {"name":"angles", "level":2, "count":1, "lines":"50"}
      ],
      "total":7
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"blot", "level":1, "count":1, "lines":"33"}
      ],
      "total":1
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"colour", "level":1, "count":1, "lines":"32"},
        {"name":"newturtle", "level":3, "count":2, "lines":"47 75"},
        {"name":"rgb", "level":3, "count":3, "lines":"22 32 43"}
      ],
      "total":6
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"canvas", "level":2, "count":1, "lines":"57"},
        {"name":"pixcol", "level":3, "count":1, "lines":"40"}
      ],
      "total":2
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"random", "level":2, "count":1, "lines":"50"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"print", "level":1, "count":3, "lines":"59 61 63"},
        {"name":"write", "level":1, "count":2, "lines":"48 49"},
        {"name":"writeln", "level":1, "count":1, "lines":"51"}
      ],
      "total":6
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"str", "level":1, "count":5, "lines":"48 49 49 51 51"}
      ],
      "total":5
    },
    {
      "category": "Input and timing routines",
      "expressions":[
        {"name":"pause", "level":1, "count":2, "lines":"52 78"}
      ],
      "total":2
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":3, "lines":"43 45 79"},
        {"name":"for", "level":1, "count":5, "lines":"15 29 42 64 73"},
        {"name":"repeat", "level":2, "count":1, "lines":"72"},
        {"name":"procedure", "level":2, "count":3, "lines":"12 26 37"}
      ],
      "total":12
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"menu", "level":0, "count":1, "lines":"70"},
        {"name":"setupturtles", "level":0, "count":1, "lines":"71"},
        {"name":"handleclick", "level":0, "count":1, "lines":"80"}
      ],
      "total":3
    }
  ],
  "pcode":[
    [112,15,1,1,112,0,123,112,6,2,123,4,112,49,124,112,64,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,23,119,22],
    [112,5,119,23,116,29,119,24],
    [112,6,119,29,116,36,119,25],
    [112,6,119,36,116,43,119,26],
    [112,6,119,43,116,50,119,27],
    [112,6,119,50,116,57,119,28],
    [112,6,119,57],
    [128,55],
    [133,1],
    [139,12,1],
    [117,12,1,112,1,124],
    [112,1],
    [120,12,1,112,5],
    [114,12,1,37,129,24],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,1,112,1,27,2,127,26,4,112,10000,2,123],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,2,112,1,27,2,127,26,4,112,70000,2,123],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,3,112,1,27,2,127,26,4,112,35,114,12,1,112,10,28,26,2,123],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,4,112,1,27,2,127,26,4,112,360,2,123],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,5,112,1,27,2,127,26,4,112,5,114,12,1,26,2,123],
    [113,22,114,12,1,112,1,27,2,127,26,4,122,112,6,112,1,27,2,127,26,4,114,12,1,101,2,123],
    [114,12,1,4,128,15],
    [140,12,134,132],
    [133,2],
    [139,13,1],
    [117,13,1,112,1,124],
    [112,1],
    [120,13,1,112,5],
    [114,13,1,37,129,35],
    [112,5000,114,13,1,112,10000,28,88],
    [114,13,1,101,87],
    [112,5000,108],
    [114,13,1,4,128,29],
    [140,13,134,132],
    [133,3],
    [139,14,3],
    [117,14,1,112,3,124],
    [112,-7,160,112,-8,160,99,120,14,1],
    [112,0,120,14,3],
    [112,1],
    [120,14,2,112,5],
    [114,14,2,37,129,47],
    [114,14,1,114,14,2,101,32,129,46],
    [114,14,2,120,14,3],
    [114,14,2,4,128,42],
    [114,14,3,112,0,35,129,54],
    [113,22,114,14,3,112,1,27,2,127,26,4,122,112,0,123],
    [118,7,84,117,114,116,108,101,32,114,14,3,11,64,118,20,32,99,104,97,110,103,105,110,103,32,100,105,114,101,99,116,105,111,110,44,64,169,142],
    [118,7,32,32,102,114,111,109,32,113,22,114,14,3,112,1,27,2,127,26,4,122,112,3,112,1,27,2,127,26,4,122,11,64,112,47,9,64,113,22,114,14,3,112,1,27,2,127,26,4,122,112,4,112,1,27,2,127,26,4,122,11,64,169,142],
    [112,46,7,112,45,26,84],
    [118,5,32,32,116,111,32,113,22,114,14,3,112,1,27,2,127,26,4,122,112,3,112,1,27,2,127,26,4,122,11,64,112,47,9,64,113,22,114,14,3,112,1,27,2,127,26,4,122,112,4,112,1,27,2,127,26,4,122,11,64,169,170,142],
    [112,200,174],
    [140,14,134,132],
    [112,0,112,0,112,100000,112,100000,144],
    [112,2500,112,80000,88],
    [118,45,67,108,105,99,107,32,111,110,32,97,32,99,105,114,99,108,101,32,116,111,32,97,108,116,101,114,32,116,104,101,32,65,78,71,76,69,83,32,115,101,116,116,105,110,103,112,0,112,36,168,142],
    [112,2500,112,86000,88],
    [118,47,111,102,32,116,104,101,32,99,111,114,114,101,115,112,111,110,100,105,110,103,32,116,117,114,116,108,101,46,32,73,116,115,32,100,105,114,101,99,116,105,111,110,32,119,105,108,108,112,0,112,36,168,142],
    [112,2500,112,92000,88],
    [118,42,116,104,101,110,32,99,104,97,110,103,101,32,116,111,32,116,104,101,32,99,108,111,115,101,115,116,32,112,111,115,115,105,98,108,101,32,97,110,103,108,101,46,112,0,112,36,168,142],
    [112,1],
    [119,64,112,5],
    [113,64,37,129,69],
    [112,10000,112,70000,88],
    [112,35,113,64,112,10,28,26,83],
    [112,110000,91],
    [113,64,4,128,63],
    [131,25],
    [131,11],
    [112,1],
    [119,64,112,5],
    [113,64,37,129,77],
    [113,22,113,64,112,1,27,2,127,26,4,122,112,0,123],
    [112,100,91],
    [113,64,4,128,72],
    [112,50,174],
    [112,-4,160,112,128,35,129,80],
    [131,36],
    [112,-9,160,112,27,32,129,71],
    [130]
  ]
}
