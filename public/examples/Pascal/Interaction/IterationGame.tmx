{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"Iteration game (Collatz sequence)",
  "author":"Peter Millican",
  "date":"28/07/2020",
  "time":"13:23:52",
  "code":"PROGRAM IterationGame;\nVAR s: string;\n    first,count,latest: integer;\nBEGIN\n keyecho(false);\n repeat\n  blank(white);\n  setxy(50,20);\n  colour(blue);\n  print('Type in a starting integer (>1):',4,36);\n  setxy(800,20);\n  colour(black);\n  repeat\n   reset(\\keybuffer);\n   repeat\n    box(200,60,white,false);\n    print(read(0),4,36);\n    pause(100)\n   until abs(?key)=\\return;\n   reset(?key);\n   s:=readln;\n   first:=valdef(s,-1)\n  until first>1;\n  latest:=first;\n  count:=0;\n  colour(blue);\n  repeat\n   setxy((count mod 10)*100+20,(count div 10)*45+300);\n   print(str(latest),4,24);\n   if latest mod 2=0 then\n    latest:=latest/2\n   else\n    latest:=3*latest+1;\n   inc(count);\n   colour(green)\n  until latest=1;\n  setxy((count mod 10)*100+20,(count div 10)*45+300);\n  colour(red);\n  print(str(latest),4,24);\n  setxy(100,100);\n  print('That took '+str(count)+' iterations to reach 1',4,36);\n  colour(black);\n  setxy(250,200);\n  print('[Press a key to continue]',4,30);\n  repeat\n  until ?key>0;\n  reset(?key)\n until false\nEND.",
  "usage":[
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"setxy", "level":1, "count":6, "lines":"8 11 28 37 40 43"}
      ],
      "total":6
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"box", "level":2, "count":1, "lines":"16"}
      ],
      "total":1
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"colour", "level":1, "count":6, "lines":"9 12 26 35 38 42"}
      ],
      "total":6
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"blank", "level":1, "count":1, "lines":"7"}
      ],
      "total":1
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"abs", "level":1, "count":1, "lines":"19"},
        {"name":"inc", "level":1, "count":1, "lines":"34"}
      ],
      "total":2
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"print", "level":1, "count":6, "lines":"10 17 29 39 41 44"}
      ],
      "total":6
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"str", "level":1, "count":3, "lines":"29 39 41"},
        {"name":"valdef", "level":1, "count":1, "lines":"22"}
      ],
      "total":4
    },
    {
      "category": "Input and timing routines",
      "expressions":[
        {"name":"pause", "level":1, "count":1, "lines":"18"},
        {"name":"readln", "level":1, "count":1, "lines":"21"},
        {"name":"keyecho", "level":2, "count":1, "lines":"5"},
        {"name":"read", "level":2, "count":1, "lines":"17"},
        {"name":"reset", "level":3, "count":3, "lines":"14 20 47"}
      ],
      "total":7
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":1, "lines":"30"},
        {"name":"else", "level":1, "count":1, "lines":"32"},
        {"name":"repeat", "level":2, "count":5, "lines":"6 13 15 27 45"}
      ],
      "total":7
    }
  ],
  "pcode":[
    [112,12,1,1,112,0,123,112,6,2,123,4,112,44,124,112,56,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,21,119,19],
    [112,33,119,20],
    [112,0,165],
    [112,16777215,96],
    [112,50,112,20,88],
    [112,255,87],
    [118,32,84,121,112,101,32,105,110,32,97,32,115,116,97,114,116,105,110,103,32,105,110,116,101,103,101,114,32,40,62,49,41,58,112,4,112,36,168,142],
    [112,800,112,20,88],
    [112,0,87],
    [112,0,161],
    [112,200,112,60,112,16777215,112,0,111],
    [112,0,163,112,4,112,36,168,142],
    [112,100,174],
    [112,-9,160,24,112,13,32,129,13],
    [112,-9,161],
    [113,19,164,2,126,142],
    [113,19,112,1,23,13,119,54],
    [113,54,112,1,35,129,12],
    [113,54,119,56],
    [112,0,119,55],
    [112,255,87],
    [113,55,112,10,31,112,100,28,112,20,26,113,55,112,10,30,112,45,28,112,300,26,88],
    [113,56,11,112,4,112,24,168,142],
    [113,56,112,2,31,112,0,32,129,29],
    [113,56,112,2,29,119,56],
    [128,30],
    [112,3,113,56,28,112,1,26,119,56],
    [116,55,1,122,4,2,123],
    [112,2263842,87],
    [113,56,112,1,32,129,24],
    [113,55,112,10,31,112,100,28,112,20,26,113,55,112,10,30,112,45,28,112,300,26,88],
    [112,16711680,87],
    [113,56,11,112,4,112,24,168,142],
    [112,100,112,100,88],
    [118,10,84,104,97,116,32,116,111,111,107,32,113,55,11,64,118,22,32,105,116,101,114,97,116,105,111,110,115,32,116,111,32,114,101,97,99,104,32,49,64,112,4,112,36,168,142],
    [112,0,87],
    [112,250,112,200,88],
    [118,25,91,80,114,101,115,115,32,97,32,107,101,121,32,116,111,32,99,111,110,116,105,110,117,101,93,112,4,112,30,168,142],
    [112,-9,160,112,0,35,129,41],
    [112,-9,161],
    [112,0,129,6],
    [130]
  ]
}
