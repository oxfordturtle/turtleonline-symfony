{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"File commands",
  "author":"Peter Millican",
  "date":"28/07/2020",
  "time":"13:23:55",
  "code":"PROGRAM FileCommands;\nCONST testfile1='testfile1.txt';\n      testfile2='testfile2.txt';\n      enquire=0;\n      delete=1;\n      create=2;\n      recreate=3;\n      tnotify=4;\n      fnotify=16;\n      tonentry=64;\n      tonexit=128;\n      todo=create;\nVAR code: integer;\n\n Procedure showresult(b: boolean;n: string);\n Begin\n  if b then\n   writeln(uppercase(n)+' returns TRUE')\n  else\n   writeln(uppercase(n)+' returns FALSE')\n End;\n\nBEGIN\n output(true,cream,true);\n code:=todo+tnotify+fnotify;\n writeln('Code on entry = $'+hexstr(code,2));\n writeln('The initial CHECKFILE command will invoke a message window ...');\n code:=checkfile(testfile1,code);\n writeln('Code on exit = $'+hexstr(code,2));\n if code and tonentry>0 then\n  writeln('File existed on entry')\n else\n  writeln('No file on entry');\n if code and tonexit>0 then\n  writeln('File existed on exit')\n else\n  writeln('No file on exit');\n writeln('');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n writeln('');\n showresult(deletefile(testfile1),'deletefile('+testfile1+')');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n writeln('');\n if checkfile(testfile1,2)>127 then\n  writeln('File \"'+testfile1+'\" has been created')\n else\n  writeln('File \"'+testfile1+'\" could not be created');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n showresult(fileexists(testfile2),'fileexists('+testfile2+')');\n writeln('');\n if copyfile(testfile1,testfile2) then\n  writeln('File \"'+testfile1+'\" has been copied to \"'+testfile2+'\"')\n else\n  writeln('File \"'+testfile1+'\" could not be copied to \"'+testfile2+'\"');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n showresult(fileexists(testfile2),'fileexists('+testfile2+')');\n writeln('');\n if checkfile(testfile1,1)<128 then\n  writeln('File \"'+testfile1+'\" has been deleted')\n else\n  writeln('File \"'+testfile1+'\" could not be deleted');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n writeln('');\n showresult(deletefile(testfile1),'deletefile('+testfile1+')');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n writeln('');\n showresult(fileexists(testfile2),'fileexists('+testfile2+')');\n if renamefile(testfile2,testfile1) then\n  writeln('File \"'+testfile2+'\" has been renamed \"'+testfile1+'\"')\n else\n  writeln('File \"'+testfile2+'\" could not be renamed \"'+testfile1+'\"');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')');\n showresult(fileexists(testfile2),'fileexists('+testfile2+')');\n writeln('');\n showresult(deletefile(testfile1),'deletefile('+testfile1+')');\n showresult(fileexists(testfile1),'fileexists('+testfile1+')')\nEND.",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"output", "level":2, "count":1, "lines":"24"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"writeln", "level":1, "count":25, "lines":"18 20 26 27 29 31 33 35 37 38 40 43 45 47 50 52 54 57 59 61 63 66 69 71 74"},
        {"name":"uppercase", "level":2, "count":2, "lines":"18 20"}
      ],
      "total":27
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"hexstr", "level":3, "count":2, "lines":"26 29"}
      ],
      "total":2
    },
    {
      "category": "File processing",
      "expressions":[
        {"name":"deletefile", "level":2, "count":3, "lines":"41 64 75"},
        {"name":"checkfile", "level":3, "count":3, "lines":"28 44 58"},
        {"name":"copyfile", "level":3, "count":1, "lines":"51"},
        {"name":"fileexists", "level":3, "count":12, "lines":"39 42 48 49 55 56 62 65 67 72 73 76"},
        {"name":"renamefile", "level":3, "count":1, "lines":"68"}
      ],
      "total":20
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":7, "lines":"17 30 34 44 51 58 68"},
        {"name":"else", "level":1, "count":7, "lines":"19 32 36 46 53 60 70"},
        {"name":"procedure", "level":2, "count":1, "lines":"15"}
      ],
      "total":15
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"showresult", "level":0, "count":15, "lines":"39 41 42 48 49 55 56 62 64 65 67 72 73 75 76"}
      ],
      "total":15
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,7,124,112,20,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,12],
    [133,1],
    [139,12,36],
    [117,12,1,112,36,124,117,12,3,1,1,4,120,12,2,112,33,2,123,4,126,120,12,1],
    [114,12,1,129,10],
    [114,12,2,112,2,66,118,13,32,114,101,116,117,114,110,115,32,84,82,85,69,64,169,170],
    [128,11],
    [114,12,2,112,2,66,118,14,32,114,101,116,117,114,110,115,32,70,65,76,83,69,64,169,170,142],
    [140,12,134,132],
    [112,-1,112,16777147,112,-1,166],
    [112,2,112,4,26,112,16,26,119,20],
    [118,17,67,111,100,101,32,111,110,32,101,110,116,114,121,32,61,32,36,113,20,112,2,12,64,169,170,142],
    [118,62,84,104,101,32,105,110,105,116,105,97,108,32,67,72,69,67,75,70,73,76,69,32,99,111,109,109,97,110,100,32,119,105,108,108,32,105,110,118,111,107,101,32,97,32,109,101,115,115,97,103,101,32,119,105,110,100,111,119,32,46,46,46,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,113,20,177,119,20,142],
    [118,16,67,111,100,101,32,111,110,32,101,120,105,116,32,61,32,36,113,20,112,2,12,64,169,170,142],
    [113,20,112,64,17,112,0,35,129,21],
    [118,21,70,105,108,101,32,101,120,105,115,116,101,100,32,111,110,32,101,110,116,114,121,169,170],
    [128,22],
    [118,16,78,111,32,102,105,108,101,32,111,110,32,101,110,116,114,121,169,170,142],
    [113,20,112,128,17,112,0,35,129,25],
    [118,20,70,105,108,101,32,101,120,105,115,116,101,100,32,111,110,32,101,120,105,116,169,170],
    [128,26],
    [118,15,78,111,32,102,105,108,101,32,111,110,32,101,120,105,116,169,170,142],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,1,177,112,128,34,118,11,100,101,108,101,116,101,102,105,108,101,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,2,177,112,127,35,142,129,35],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,18,34,32,104,97,115,32,98,101,101,110,32,99,114,101,97,116,101,100,64,169,170],
    [128,36],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,22,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,99,114,101,97,116,101,100,64,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,112,3,191,142,129,42],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,22,34,32,104,97,115,32,98,101,101,110,32,99,111,112,105,101,100,32,116,111,32,34,64,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,34,9,64,169,170],
    [128,43],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,26,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,99,111,112,105,101,100,32,116,111,32,34,64,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,34,9,64,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,1,177,112,128,34,142,129,49],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,18,34,32,104,97,115,32,98,101,101,110,32,100,101,108,101,116,101,100,64,169,170],
    [128,50],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,118,22,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,100,101,108,101,116,101,100,64,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,1,177,112,128,34,118,11,100,101,108,101,116,101,102,105,108,101,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,1,191,142,129,59],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,118,20,34,32,104,97,115,32,98,101,101,110,32,114,101,110,97,109,101,100,32,34,64,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,34,9,64,169,170],
    [128,60],
    [118,6,70,105,108,101,32,34,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,118,24,34,32,99,111,117,108,100,32,110,111,116,32,98,101,32,114,101,110,97,109,101,100,32,34,64,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,34,9,64,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,50,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,1,177,112,128,34,118,11,100,101,108,101,116,101,102,105,108,101,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,112,0,177,112,127,35,118,11,102,105,108,101,101,120,105,115,116,115,40,118,13,116,101,115,116,102,105,108,101,49,46,116,120,116,64,112,41,9,64,142,131,4],
    [130]
  ]
}
