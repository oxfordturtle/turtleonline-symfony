{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"Directory commands",
  "author":"Peter Millican",
  "date":"23/07/2020",
  "time":"11:59:07",
  "code":"PROGRAM Directory_commands;\nCONST subdir = 'testsubdir';\n      enquire = 0;\n      delete = 1;\n      create = 2;\n      recreate = 3;\n      tnotify = 4;\n      fnotify = 16;\n      tonentry = 64;\n      tonexit = 128;\n      todo = create;\nVAR code: integer;\n\n  Procedure showresult(b: boolean; n: string);\n  Begin\n    if b then\n      writeln(uppercase(n) + ' returns TRUE')\n    else\n      writeln(uppercase(n) + ' returns FALSE')\n  End;\n\nBEGIN\n  output(true, cream, true);\n  code := todo + tnotify + fnotify;\n  writeln('Code on entry = $' + hexstr(code, 2));\n  code := checkdir(subdir, code);\n  writeln('Code on exit = $' + hexstr(code, 2));\n  if code and tonentry > 0 then\n    writeln('Subdirectory existed on entry')\n  else\n    writeln('No subdirectory on entry');\n  if code and tonexit > 0 then\n    writeln('Subdirectory existed on exit')\n  else\n    writeln('No subdirectory on exit');\n  writeln('');\n  showresult(mkdir(subdir), 'mkdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  showresult(mkdir(subdir), 'mkdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  showresult(rmdir(subdir), 'rmdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  showresult(rmdir(subdir), 'rmdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  showresult(mkdir(subdir), 'mkdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  showresult(mkdir(subdir), 'mkdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  if checkfile(subdir + '\\A_File.txt', 2) > 127 then\n    writeln('File has been created')\n  else\n    writeln('File could not be created');\n  showresult(rmdir(subdir), 'rmdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')');\n  writeln('');\n  if checkfile(subdir + '\\A_File.txt', 1) < 128 then\n    writeln('File has been deleted')\n  else\n    writeln('File could not be deleted');\n  showresult(rmdir(subdir), 'rmdir(' + subdir + ')');\n  showresult(direxists(subdir), 'direxists(' + subdir + ')')\nEND.",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"output", "level":2, "count":1, "lines":"23"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"writeln", "level":1, "count":20, "lines":"17 19 25 27 29 31 33 35 36 39 42 45 48 51 54 56 58 61 63 65"},
        {"name":"uppercase", "level":2, "count":2, "lines":"17 19"}
      ],
      "total":22
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"hexstr", "level":3, "count":2, "lines":"25 27"}
      ],
      "total":2
    },
    {
      "category": "File processing",
      "expressions":[
        {"name":"mkdir", "level":2, "count":4, "lines":"37 40 49 52"},
        {"name":"rmdir", "level":2, "count":4, "lines":"43 46 59 66"},
        {"name":"checkdir", "level":3, "count":1, "lines":"26"},
        {"name":"checkfile", "level":3, "count":2, "lines":"55 62"},
        {"name":"direxists", "level":3, "count":8, "lines":"38 41 44 47 50 53 60 67"}
      ],
      "total":19
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":5, "lines":"16 28 32 55 62"},
        {"name":"else", "level":1, "count":5, "lines":"18 30 34 57 64"},
        {"name":"procedure", "level":2, "count":1, "lines":"14"}
      ],
      "total":11
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"showresult", "level":0, "count":16, "lines":"37 38 40 41 43 44 46 47 49 50 52 53 59 60 66 67"}
      ],
      "total":16
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,7,124,112,20,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,12],
    [133,1],
    [139,12,36],
    [117,12,1,112,36,124,117,12,3,1,1,4,120,12,2,112,33,2,123,4,126,120,12,1],
    [114,12,1,129,10],
    [114,12,2,112,2,66,118,13,32,114,101,116,117,114,110,115,32,84,82,85,69,64,169,170],
    [128,11],
    [114,12,2,112,2,66,118,14,32,114,101,116,117,114,110,115,32,70,65,76,83,69,64,169,170,142],
    [140,12,134,132],
    [112,-1,112,16777147,112,-1,166],
    [112,2,112,4,26,112,16,26,119,20],
    [118,17,67,111,100,101,32,111,110,32,101,110,116,114,121,32,61,32,36,113,20,112,2,12,64,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,113,20,178,119,20,142],
    [118,16,67,111,100,101,32,111,110,32,101,120,105,116,32,61,32,36,113,20,112,2,12,64,169,170,142],
    [113,20,112,64,17,112,0,35,129,20],
    [118,29,83,117,98,100,105,114,101,99,116,111,114,121,32,101,120,105,115,116,101,100,32,111,110,32,101,110,116,114,121,169,170],
    [128,21],
    [118,24,78,111,32,115,117,98,100,105,114,101,99,116,111,114,121,32,111,110,32,101,110,116,114,121,169,170,142],
    [113,20,112,128,17,112,0,35,129,24],
    [118,28,83,117,98,100,105,114,101,99,116,111,114,121,32,101,120,105,115,116,101,100,32,111,110,32,101,120,105,116,169,170],
    [128,25],
    [118,23,78,111,32,115,117,98,100,105,114,101,99,116,111,114,121,32,111,110,32,101,120,105,116,169,170,142],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,2,178,112,127,35,118,6,109,107,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,2,178,112,127,35,118,6,109,107,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,1,178,112,128,34,118,6,114,109,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,1,178,112,128,34,118,6,114,109,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,2,178,112,127,35,118,6,109,107,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,2,178,112,127,35,118,6,109,107,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,118,11,92,65,95,70,105,108,101,46,116,120,116,64,112,2,177,112,127,35,142,129,47],
    [118,21,70,105,108,101,32,104,97,115,32,98,101,101,110,32,99,114,101,97,116,101,100,169,170],
    [128,48],
    [118,25,70,105,108,101,32,99,111,117,108,100,32,110,111,116,32,98,101,32,99,114,101,97,116,101,100,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,1,178,112,128,34,118,6,114,109,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,0,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,118,11,92,65,95,70,105,108,101,46,116,120,116,64,112,1,177,112,128,34,142,129,54],
    [118,21,70,105,108,101,32,104,97,115,32,98,101,101,110,32,100,101,108,101,116,101,100,169,170],
    [128,55],
    [118,25,70,105,108,101,32,99,111,117,108,100,32,110,111,116,32,98,101,32,100,101,108,101,116,101,100,169,170,142],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,1,178,112,128,34,118,6,114,109,100,105,114,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [118,10,116,101,115,116,115,117,98,100,105,114,112,0,178,112,127,35,118,10,100,105,114,101,120,105,115,116,115,40,118,10,116,101,115,116,115,117,98,100,105,114,64,112,41,9,64,142,131,4],
    [130]
  ]
}
