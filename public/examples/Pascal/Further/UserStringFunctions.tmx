{
  "format":1,
  "language":"Pascal",
  "version":13,
  "name":"User-defined string functions",
  "author":"Peter Millican",
  "date":"28/07/2020",
  "time":"13:23:49",
  "code":"PROGRAM UserStringFunctions;\n\n Function reverse(s: string): string;\n Var posn: integer;\n     t: string;\n Begin\n  t:='';\n  for posn:=1 to length(s) do\n   t:=s[posn]+t;\n  result:=t\n End;\n\n Function revrecurse(s: string): string;\n Begin\n  if s='' then\n   result:=s\n  else\n   result:=reverse(delete(s,1,1))+s[1]\n End;\n\n Function casetest(c: char): integer;\n Begin\n  if (c>='A') and (c<='Z') then\n   result:=1\n  else\n  if (c>='a') and (c<='z') then\n   result:=0\n  else\n   result:=-1\n End;\n\n Function initcaps(s: string): string;\n Var posn: integer;\n Begin\n  s:=lowercase(s);\n  if casetest(s[1])=0 then\n   s[1]:=chr(ord(s[1])-32);\n  for posn:=2 to length(s) do\n   if (s[posn-1]=' ') and (casetest(s[posn])=0) then\n    s[posn]:=chr(ord(s[posn])-32);\n  result:=s\n End;\n\n Function caesar(s: string;n: integer): string;\n Var posn: integer;\n Begin\n  for posn:=1 to length(s) do\n   begin\n    if casetest(s[posn])=1 then\n     begin\n      s[posn]:=chr(ord(s[posn])+n);\n      if s[posn]>'Z' then\n       s[posn]:=chr(ord(s[posn])-26)\n     end\n    else\n    if casetest(s[posn])=0 then\n     begin\n      s[posn]:=chr(ord(s[posn])+n);\n      if s[posn]>'z' then\n       s[posn]:=chr(ord(s[posn])-26)\n     end\n   end;\n  result:=s\n End;\n\n Procedure process(s: string);\n Begin\n  writeln('');\n  writeln('ORIGINAL STRING:            \"'+s+'\"');\n  writeln('REVERSED (by iteration):    \"'+reverse(s)+'\"');\n  writeln('REVERSED (by recursion):    \"'+revrecurse(s)+'\"');\n  writeln('INITIAL CAPITAL ALL WORDS:  \"'+initcaps(s)+'\"');\n  writeln('CAESAR CIPHER (1 letter):   \"'+caesar(s,1)+'\"');\n  writeln('CAESAR DECRYPT (1+25 = 26): \"'+caesar(caesar(s,1),25)+'\"');\n  writeln('CAESAR CIPHER (4 letters):  \"'+caesar(s,4)+'\"');\n  writeln('CAESAR DECRYPT (4+22 = 26): \"'+caesar(caesar(s,4),22)+'\"')\n End;\n\nBEGIN\n output(true,cream,true);\n writeln('Some User-Defined String Functions');\n process('the quick brown fox jumps,');\n process('OVER THE LAZY DOG.')\nEND.",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"output", "level":2, "count":1, "lines":"80"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"writeln", "level":1, "count":10, "lines":"68 69 70 71 72 73 74 75 76 81"},
        {"name":"length", "level":2, "count":3, "lines":"8 38 47"},
        {"name":"lowercase", "level":2, "count":1, "lines":"35"},
        {"name":"delete", "level":3, "count":1, "lines":"18"}
      ],
      "total":15
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"chr", "level":3, "count":6, "lines":"37 40 51 53 58 60"},
        {"name":"ord", "level":3, "count":6, "lines":"37 40 51 53 58 60"}
      ],
      "total":12
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"if", "level":1, "count":9, "lines":"15 23 26 36 39 49 52 56 59"},
        {"name":"else", "level":1, "count":4, "lines":"17 25 28 55"},
        {"name":"for", "level":1, "count":3, "lines":"8 38 47"},
        {"name":"procedure", "level":2, "count":1, "lines":"66"},
        {"name":"function", "level":3, "count":5, "lines":"3 13 21 32 44"}
      ],
      "total":22
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"reverse", "level":0, "count":2, "lines":"18 70"},
        {"name":"casetest", "level":0, "count":4, "lines":"36 39 49 56"},
        {"name":"revrecurse", "level":0, "count":1, "lines":"71"},
        {"name":"initcaps", "level":0, "count":1, "lines":"72"},
        {"name":"caesar", "level":0, "count":6, "lines":"73 74 74 75 76 76"},
        {"name":"process", "level":0, "count":2, "lines":"82 83"}
      ],
      "total":16
    }
  ],
  "pcode":[
    [112,19,1,1,112,0,123,112,6,2,123,4,112,6,124,112,25,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,94],
    [133,1],
    [139,12,106],
    [117,12,1,112,106,124,117,12,3,120,12,1,112,33,120,12,2,117,12,37,1,1,4,120,12,36,112,33,2,123,4,126],
    [117,12,74,120,12,72,112,33,120,12,73],
    [114,12,72,118,0,2,126,142],
    [112,1],
    [120,12,71,114,12,36,65],
    [114,12,71,37,129,14],
    [114,12,72,114,12,36,114,12,71,112,1,27,2,127,26,4,122,9,114,12,72,64,2,126,142],
    [114,12,71,4,128,10],
    [114,12,1,114,12,72,2,126],
    [113,12,119,18,140,12,134,132],
    [133,2],
    [139,13,70],
    [117,13,1,112,70,124,117,13,3,120,13,1,112,33,120,13,2,117,13,37,1,1,4,120,13,36,112,33,2,123,4,126],
    [114,13,36,118,0,40,142,129,22],
    [114,13,1,114,13,36,2,126],
    [128,24],
    [114,13,1,114,13,36,112,1,112,1,68,131,4],
    [114,18,1,8,114,13,36,112,1,112,1,27,2,127,26,4,122,9,64,2,126,142],
    [113,13,119,18,140,13,134,132],
    [133,3],
    [139,14,2],
    [117,14,1,112,2,124,120,14,2],
    [114,14,2,112,65,37,114,14,2,112,90,36,17,129,31],
    [112,1,120,14,1],
    [128,35],
    [114,14,2,112,97,37,114,14,2,112,122,36,17,129,34],
    [112,0,120,14,1],
    [128,35],
    [112,1,23,120,14,1],
    [113,14,119,18,140,14,134,132],
    [133,4],
    [139,15,71],
    [117,15,1,112,71,124,117,15,3,120,15,1,112,33,120,15,2,117,15,37,1,1,4,120,15,36,112,33,2,123,4,126],
    [114,15,36,114,15,36,112,1,66,2,126,142],
    [114,15,36,112,1,112,1,27,2,127,26,4,122,131,25],
    [114,18,1,112,0,32,129,43],
    [114,15,36,112,1,112,1,27,2,127,26,4,114,15,36,112,1,112,1,27,2,127,26,4,122,112,32,27,2,123],
    [112,2],
    [120,15,71,114,15,36,65],
    [114,15,71,37,129,50],
    [114,15,36,114,15,71,112,1,27,112,1,27,2,127,26,4,122,112,32,32,114,15,36,114,15,71,112,1,27,2,127,26,4,122,131,25],
    [114,18,1,112,0,32,17,129,49],
    [114,15,36,114,15,71,112,1,27,2,127,26,4,114,15,36,114,15,71,112,1,27,2,127,26,4,122,112,32,27,2,123],
    [114,15,71,4,128,44],
    [114,15,1,114,15,36,2,126],
    [113,15,119,18,140,15,134,132],
    [133,5],
    [139,16,72],
    [117,16,1,112,72,124,117,16,3,120,16,1,112,33,120,16,2,120,16,71,117,16,37,1,1,4,120,16,36,112,33,2,123,4,126],
    [112,1],
    [120,16,72,114,16,36,65],
    [114,16,72,37,129,70],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,122,131,25],
    [114,18,1,112,1,32,129,64],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,114,16,36,114,16,72,112,1,27,2,127,26,4,122,114,16,71,26,2,123],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,122,112,90,35,129,63],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,114,16,36,114,16,72,112,1,27,2,127,26,4,122,112,26,27,2,123],
    [128,69],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,122,131,25],
    [114,18,1,112,0,32,129,69],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,114,16,36,114,16,72,112,1,27,2,127,26,4,122,114,16,71,26,2,123],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,122,112,122,35,129,69],
    [114,16,36,114,16,72,112,1,27,2,127,26,4,114,16,36,114,16,72,112,1,27,2,127,26,4,122,112,26,27,2,123],
    [114,16,72,4,128,56],
    [114,16,1,114,16,36,2,126],
    [113,16,119,18,140,16,134,132],
    [133,6],
    [139,17,35],
    [117,17,1,112,35,124,117,17,2,1,1,4,120,17,1,112,33,2,123,4,126],
    [118,0,169,170,142],
    [118,29,79,82,73,71,73,78,65,76,32,83,84,82,73,78,71,58,32,32,32,32,32,32,32,32,32,32,32,32,34,114,17,1,64,112,34,9,64,169,170,142],
    [118,29,82,69,86,69,82,83,69,68,32,40,98,121,32,105,116,101,114,97,116,105,111,110,41,58,32,32,32,32,34,114,17,1,131,4],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,82,69,86,69,82,83,69,68,32,40,98,121,32,114,101,99,117,114,115,105,111,110,41,58,32,32,32,32,34,114,17,1,131,16],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,73,78,73,84,73,65,76,32,67,65,80,73,84,65,76,32,65,76,76,32,87,79,82,68,83,58,32,32,34,114,17,1,131,36],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,67,73,80,72,69,82,32,40,49,32,108,101,116,116,101,114,41,58,32,32,32,34,114,17,1,112,1,131,52],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,68,69,67,82,89,80,84,32,40,49,43,50,53,32,61,32,50,54,41,58,32,34,114,17,1,112,1,131,52],
    [114,18,1,8,112,25,131,52],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,67,73,80,72,69,82,32,40,52,32,108,101,116,116,101,114,115,41,58,32,32,34,114,17,1,112,4,131,52],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,68,69,67,82,89,80,84,32,40,52,43,50,50,32,61,32,50,54,41,58,32,34,114,17,1,112,4,131,52],
    [114,18,1,8,112,22,131,52],
    [114,18,1,8,64,112,34,9,64,169,170,142],
    [140,17,134,132],
    [112,-1,112,16777147,112,-1,166],
    [118,34,83,111,109,101,32,85,115,101,114,45,68,101,102,105,110,101,100,32,83,116,114,105,110,103,32,70,117,110,99,116,105,111,110,115,169,170,142],
    [118,26,116,104,101,32,113,117,105,99,107,32,98,114,111,119,110,32,102,111,120,32,106,117,109,112,115,44,142,131,72],
    [118,18,79,86,69,82,32,84,72,69,32,76,65,90,89,32,68,79,71,46,142,131,72],
    [130]
  ]
}
