{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"The sex ratio",
  "author":"Peter Millican",
  "date":"23/07/2020",
  "time":"12:00:32",
  "code":"REM SexRatio\n\nCONST POPULATION% = 1000\nCONST MATEPERGEN% = 400\nCONST RANDOMVAR% = 1\nCONST LEFTMARGIN% = 70\nCONST TOPMARGIN% = 20\nDIM female%(POPULATION%)\nDIM fop%(POPULATION%)\nPROCaxes\nFOR n% = 0 TO POPULATION%\n  female%(n%) = (RND(2) = 1)\n  fop%(n%) = 900 + RND(100)\nNEXT\ngeneration% = 0\nREPEAT\n  PROCgraph\n  INC(generation%)\n  FOR n% = 0 TO MATEPERGEN%\n    PROCdomating\n  NEXT\nUNTIL generation% = 900\nEND\n\nDEF PROCaxes\n  LOCAL i%\n  FOR i% = 1 TO 9\n    SETXY(LEFTMARGIN% + i% * 100 - 25, TOPMARGIN% + 800)\n    PRINT(STR$(i% * 100), 4, 20)\n  NEXT\n  FOR i% = 2 TO 10\n    SETXY(0, 1000 - i% * 100)\n    COLOUR(BLACK)\n    PRINT(STR$(i% * 10) + \"%\", 4, 20)\n    MOVEXY(LEFTMARGIN%, TOPMARGIN%)\n    COLOUR(LIGHTGREY)\n    DRAWXY(1000 - LEFTMARGIN%, 0)\n  NEXT\n  SETXY(LEFTMARGIN%, TOPMARGIN%)\n  COLOUR(BLACK)\n  DRAWXY(0, 800)\n  DRAWXY(1000 - LEFTMARGIN%, 0)\n  COLOUR(RED)\n  SETXY(50, 880)\n  PRINT(\"Proportion of Females in Population, over 900 Generations\", 4, 25)\n  SETXY(50, 930)\n  PRINT(\"with Female Offspring Probability genes initially set 90%+\", 4, 25)\nENDPROC\n\nDEF PROCgraph\n  LOCAL females%, n%\n  females% = 0\n  FOR n% = 0 TO POPULATION%\n    IF female%(n%) THEN INC(females%)\n  NEXT\n  COLOUR(RED)\n  SETXY(LEFTMARGIN% + generation%, TOPMARGIN% + 1000 - females%)\n  IF generation% > 0 THEN POLYLINE(2)\nENDPROC\n\nDEF PROCdomating\n  LOCAL a%, b%, replace%\n  LOCAL inheritA%\n  REPEAT\n    a% = RND(POPULATION%)\n    b% = RND(POPULATION%)\n  UNTIL female%(a%) <> female%(b%)\n  inheritA% = (RND(2) = 1)\n  replace% = RND(POPULATION%)\n  IF inheritA% THEN\n    fop%(replace%) = fop%(a%)\n  ELSE\n    fop%(replace%) = fop%(b%)\n  ENDIF\n  female%(replace%) = fop%(replace%) > RND(1000) - 1\n  fop%(replace%) = fop%(replace%) + RND(RANDOMVAR% * 20) - RANDOMVAR% * 10\n  fop%(replace%) = MAX(0, MIN(1000, fop%(replace%)))\nENDPROC",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"DRAWXY", "level":2, "count":3, "lines":"37 41 42"},
        {"name":"MOVEXY", "level":2, "count":1, "lines":"35"}
      ],
      "total":4
    },
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"SETXY", "level":1, "count":6, "lines":"28 32 39 44 46 57"}
      ],
      "total":6
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"POLYLINE", "level":2, "count":1, "lines":"58"}
      ],
      "total":1
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"COLOUR", "level":1, "count":5, "lines":"33 36 40 43 56"}
      ],
      "total":5
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"INC", "level":1, "count":2, "lines":"54 18"},
        {"name":"MAX", "level":2, "count":1, "lines":"77"},
        {"name":"MIN", "level":2, "count":1, "lines":"77"},
        {"name":"RND", "level":2, "count":8, "lines":"65 66 68 69 75 76 12 13"}
      ],
      "total":12
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"PRINT", "level":1, "count":4, "lines":"29 34 45 47"}
      ],
      "total":4
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"STR$", "level":1, "count":2, "lines":"29 34"}
      ],
      "total":2
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":3, "lines":"54 58 70"},
        {"name":"ELSE", "level":1, "count":1, "lines":"72"},
        {"name":"FOR", "level":1, "count":5, "lines":"27 31 53 11 19"},
        {"name":"REPEAT", "level":2, "count":2, "lines":"64 16"},
        {"name":"DEF PROC", "level":2, "count":3, "lines":"25 50 61"}
      ],
      "total":14
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCaxes", "level":0, "count":1, "lines":"10"},
        {"name":"PROCgraph", "level":0, "count":1, "lines":"17"},
        {"name":"PROCdomating", "level":0, "count":1, "lines":"20"}
      ],
      "total":3
    }
  ],
  "pcode":[
    [112,15,1,1,112,0,123,112,6,2,123,4,112,2014,124,112,2029,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,23,119,22],
    [112,1001,119,23],
    [116,1026,119,1025],
    [112,1001,119,1026],
    [128,68],
    [133,1],
    [139,12,1],
    [117,12,1,112,1,124],
    [112,1],
    [120,12,1,112,9],
    [114,12,1,37,129,17],
    [112,70,114,12,1,112,100,28,26,112,25,27,112,20,112,800,26,88],
    [114,12,1,112,100,28,11,112,4,112,20,168,142],
    [114,12,1,4,128,12],
    [112,2],
    [120,12,1,112,10],
    [114,12,1,37,129,27],
    [112,0,112,1000,114,12,1,112,100,28,27,88],
    [112,0,87],
    [114,12,1,112,10,28,11,118,1,37,64,112,4,112,20,168,142],
    [112,70,112,20,89],
    [112,10526880,87],
    [112,1000,112,70,27,112,0,90],
    [114,12,1,4,128,18],
    [112,70,112,20,88],
    [112,0,87],
    [112,0,112,800,90],
    [112,1000,112,70,27,112,0,90],
    [112,16711680,87],
    [112,50,112,880,88],
    [118,57,80,114,111,112,111,114,116,105,111,110,32,111,102,32,70,101,109,97,108,101,115,32,105,110,32,80,111,112,117,108,97,116,105,111,110,44,32,111,118,101,114,32,57,48,48,32,71,101,110,101,114,97,116,105,111,110,115,112,4,112,25,168,142],
    [112,50,112,930,88],
    [118,58,119,105,116,104,32,70,101,109,97,108,101,32,79,102,102,115,112,114,105,110,103,32,80,114,111,98,97,98,105,108,105,116,121,32,103,101,110,101,115,32,105,110,105,116,105,97,108,108,121,32,115,101,116,32,57,48,37,43,112,4,112,25,168,142],
    [140,12,134,132],
    [133,2],
    [139,13,2],
    [117,13,1,112,2,124],
    [112,0,120,13,1],
    [112,0],
    [120,13,2,112,1000],
    [114,13,2,37,129,47],
    [113,22,114,13,2,2,127,26,4,122,129,46],
    [117,13,1,1,122,4,2,123],
    [114,13,2,4,128,42],
    [112,16711680,87],
    [112,70,113,2029,26,112,20,112,1000,26,114,13,1,27,88],
    [113,2029,112,0,35,129,51],
    [112,2,105],
    [140,13,134,132],
    [133,3],
    [139,14,4],
    [117,14,1,112,4,124],
    [112,1000,7,4,120,14,1],
    [112,1000,7,4,120,14,2],
    [113,22,114,14,1,2,127,26,4,122,113,22,114,14,2,2,127,26,4,122,33,129,55],
    [112,2,7,4,112,1,32,120,14,4],
    [112,1000,7,4,120,14,3],
    [114,14,4,129,63],
    [113,1025,114,14,3,2,127,26,4,113,1025,114,14,1,2,127,26,4,122,2,123],
    [128,64],
    [113,1025,114,14,3,2,127,26,4,113,1025,114,14,2,2,127,26,4,122,2,123],
    [113,22,114,14,3,2,127,26,4,113,1025,114,14,3,2,127,26,4,122,112,1000,7,4,112,1,27,35,2,123],
    [113,1025,114,14,3,2,127,26,4,113,1025,114,14,3,2,127,26,4,122,112,1,112,20,28,7,4,26,112,1,112,10,28,27,2,123],
    [113,1025,114,14,3,2,127,26,4,112,0,112,1000,113,1025,114,14,3,2,127,26,4,122,39,38,2,123],
    [140,14,134,132],
    [131,8],
    [112,0],
    [119,2028,112,1000],
    [113,2028,37,129,75],
    [113,22,113,2028,2,127,26,4,112,2,7,4,112,1,32,2,123],
    [113,1025,113,2028,2,127,26,4,112,900,112,100,7,4,26,2,123],
    [113,2028,4,128,70],
    [112,0,119,2029],
    [131,37],
    [116,2029,1,122,4,2,123],
    [112,0],
    [119,2028,112,400],
    [113,2028,37,129,83],
    [131,52],
    [113,2028,4,128,79],
    [113,2029,112,900,32,129,76],
    [130]
  ]
}
