{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"Diffusion",
  "author":"meriv",
  "date":"28/07/2020",
  "time":"08:30:34",
  "code":"CONST WIDTH% = 100\nCONST LEFTAXIS% = 21\nCONST RIGHTAXIS% = 15\nCONST TOPMARGIN% = 20\nCONST GAP% = 10\nCONST CONCBOTTOM% = 80\nCONST CONCWIDTH% = 50\nCONST COLOUR1% = RED\nCONST COLOUR2% = BLUE\nCONST EDGECOL% = BLACK\nCONST MOLCOL% = RED\nCONST CONCCOL% = SEAGREEN\nDIM num1%(WIDTH%)\n\nPROCsetup\nPROCdrawaxes\nFOR x1% = 0 TO WIDTH% - 1\n  PROCgraphit(x1%, TRUE)\nNEXT\nPAUSE(2500)\nREPEAT\n  x1% = RND(WIDTH% - 1)\n  y1% = RND(WIDTH% - 1)\n  IF y1% <= x1% THEN\n    y1% = bottom% - y1%\n    x2% = x1%\n    y2% = y1%\n    IF RND(3) = 1 THEN\n      INC(x2%)\n    ELSE\n      DEC(y2%)\n    ENDIF\n    temp% = PIXCOL(x1% + LEFTAXIS%, y1%)\n    IF (PIXCOL(x2% + LEFTAXIS%, y2%) EOR temp%) = eorval% THEN\n      NOUPDATE\n      PIXSET(x1% + LEFTAXIS%, y1%, PIXCOL(x2% + LEFTAXIS%, y2%))\n      PIXSET(x2% + LEFTAXIS%, y2%, temp%)\n      IF (x2% <> x1%) THEN\n        PROCshowswap(x1%, temp%)\n      ENDIF\n      UPDATE\n    ENDIF\n  ENDIF\nUNTIL 0 = 1\nEND\n\nDEF PROCsetup\n  CANVAS(0, 0, WIDTH% + LEFTAXIS% + RIGHTAXIS%, WIDTH% * 2 + TOPMARGIN% + GAP%)\n  RESOLUTION(WIDTH% + LEFTAXIS% + RIGHTAXIS%, WIDTH% * 2 + TOPMARGIN% + GAP%)\n  bottom% = WIDTH% * 2 + TOPMARGIN% + GAP% - 1\n  boundary% = DIVMULT(WIDTH%, 1000, 707)\n  eorval% = COLOUR1% EOR COLOUR2%\n  COLOUR(COLOUR2%)\n  SETXY(boundary% + 1 + LEFTAXIS%, bottom% - boundary%)\n  DRAWXY(0, boundary%)\n  THICKNESS(1)\n  SETXY(boundary% + LEFTAXIS%, bottom% - boundary% - 10)\n  DRAWXY(0, 5)\n  SETXY(boundary% + LEFTAXIS%, TOPMARGIN%)\n  DRAWXY(0, 5)\n  COLOUR(COLOUR1%)\n  SETXY(boundary% + LEFTAXIS% - 1, bottom% - boundary% - 10)\n  DRAWXY(0, 5)\n  SETXY(boundary% + LEFTAXIS% - 1, TOPMARGIN%)\n  DRAWXY(0, 5)\n  COLOUR(EDGECOL%)\n  SETXY(LEFTAXIS% - 1, bottom%)\n  DRAWXY(WIDTH% + 1, -WIDTH% - 1)\n  COLOUR(EDGECOL%)\n  DRAWXY(0, WIDTH% + 1)\n  RECOLOUR(LEFTAXIS% + 2, bottom%, COLOUR1%)\n  RECOLOUR(WIDTH% + LEFTAXIS% - 4, bottom%, COLOUR2%)\n  FOR x1% = 0 TO boundary% - 1\n    num1%(x1%) = x1% + 1\n  NEXT\n  FOR x1% = boundary% TO WIDTH% - 1\n    num1%(x1%) = 0\n  NEXT\n  COLOUR(BLACK)\n  SETXY(0, 0)\n  PRINT(\"Diffusion in a Tapering Tube\", 2, WIDTH% / 10)\nENDPROC\n\nDEF PROCdrawaxes\nLOCAL n%\n  FOR n% = -1 TO CONCWIDTH%\n    PIXSET(LEFTAXIS% - 1, CONCBOTTOM% - n%, BLACK)\n  NEXT\n  FOR n% = 0 TO WIDTH%\n    PIXSET(LEFTAXIS% + 100, TOPMARGIN% + n%, BLACK)\n  NEXT\n  FOR n% = 0 TO 100\n    IF (n% < 31) OR (n% MOD 5 = 0) THEN\n      PIXSET(LEFTAXIS% + n%, CONCBOTTOM% + 1, BLACK)\n    ENDIF\n    PIXSET(LEFTAXIS% + n%, TOPMARGIN% + 101, BLACK)\n  NEXT\n  DRAWXY(0, -CONCWIDTH%)\n  COLOUR(CONCCOL%)\n  SETXY(0, CONCBOTTOM% - CONCWIDTH% - WIDTH% / 15)\n  PRINT(\"100%\", 2, WIDTH% / 15)\n  SETXY(0, CONCBOTTOM% - WIDTH% / 15)\n  PRINT(\"  0%\", 2, WIDTH% / 15)\n  SETXY(0, TOPMARGIN% + WIDTH% * 11 / 10)\n  PRINT(\"Red concentration\", 2, WIDTH% / 12)\n  COLOUR(MOLCOL%)\n  SETXY(WIDTH% + LEFTAXIS% + 2, TOPMARGIN% + WIDTH% - boundary% + 1 - WIDTH% / 15)\n  PRINT(STR$(boundary% - 1), 2, WIDTH% / 15)\n  SETXY(WIDTH% + LEFTAXIS% + 2, TOPMARGIN% + WIDTH% - WIDTH% / 15)\n  PRINT(\"  0\", 2, WIDTH% / 15)\n  SETXY(0, TOPMARGIN% + WIDTH% * 12 / 10)\n  PRINT(\"Red molecule count\", 2, WIDTH% / 12)\n  COLOUR(BLACK)\n  SETXY(0, TOPMARGIN% + WIDTH% * 13 / 10 + 5)\n  PRINT(\"(at horizontal position\", 2, WIDTH% / 15)\n  SETXY(0, TOPMARGIN% + WIDTH% * 14 / 10 + 5)\n  PRINT(\"in tapering tube)\", 2, WIDTH% / 15)\nENDPROC\n\nDEF PROCgraphit(x%, show%)\n  IF show% THEN\n    PIXSET(x% + LEFTAXIS%, TOPMARGIN% + WIDTH% - num1%(x%), MOLCOL%)\n    PIXSET(x% + LEFTAXIS%, CONCBOTTOM% - DIVMULT(num1%(x%), x% + 1, CONCWIDTH%), CONCCOL%)\n  ELSE\n    PIXSET(x% + LEFTAXIS%, TOPMARGIN% + WIDTH% - num1%(x%), WHITE)\n    PIXSET(x% + LEFTAXIS%, CONCBOTTOM% - DIVMULT(num1%(x%), x% + 1, CONCWIDTH%), WHITE)\n  ENDIF\nENDPROC\n\nDEF PROCshowswap(x%, origcol%)\n  PROCgraphit(x1%, FALSE)\n  PROCgraphit(x1% + 1, FALSE)\n  IF origcol% = COLOUR1% THEN\n    DEC(num1%(x1%))\n    INC(num1%(x1% + 1))\n  ELSE\n    INC(num1%(x1%))\n    DEC(num1%(x1% + 1))\n  ENDIF\n  PROCgraphit(x1%, TRUE)\n  PROCgraphit(x1% + 1, TRUE)\nENDPROC\n\n",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"DRAWXY", "level":2, "count":8, "lines":"55 58 60 63 65 68 70 98"}
      ],
      "total":8
    },
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"SETXY", "level":1, "count":15, "lines":"54 57 59 62 64 67 80 100 102 104 107 109 111 114 116"}
      ],
      "total":15
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"COLOUR", "level":1, "count":8, "lines":"53 61 66 69 79 99 106 113"},
        {"name":"THICKNESS", "level":1, "count":1, "lines":"56"}
      ],
      "total":9
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"NOUPDATE", "level":1, "count":1, "lines":"35"},
        {"name":"UPDATE", "level":1, "count":1, "lines":"41"},
        {"name":"CANVAS", "level":2, "count":1, "lines":"48"},
        {"name":"RESOLUTION", "level":2, "count":1, "lines":"49"},
        {"name":"PIXCOL", "level":3, "count":3, "lines":"33 34 36"},
        {"name":"PIXSET", "level":3, "count":10, "lines":"87 90 94 96 122 123 125 126 36 37"},
        {"name":"RECOLOUR", "level":3, "count":2, "lines":"71 72"}
      ],
      "total":19
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"DEC", "level":1, "count":3, "lines":"134 138 31"},
        {"name":"INC", "level":1, "count":3, "lines":"135 137 29"},
        {"name":"RND", "level":2, "count":3, "lines":"22 23 28"},
        {"name":"DIVMULT", "level":3, "count":3, "lines":"51 123 126"}
      ],
      "total":12
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"PRINT", "level":1, "count":9, "lines":"81 101 103 105 108 110 112 115 117"}
      ],
      "total":9
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"STR$", "level":1, "count":1, "lines":"108"}
      ],
      "total":1
    },
    {
      "category": "Input and timing routines",
      "expressions":[
        {"name":"PAUSE", "level":1, "count":1, "lines":"20"}
      ],
      "total":1
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":7, "lines":"93 121 133 24 28 34 38"},
        {"name":"ELSE", "level":1, "count":3, "lines":"124 136 30"},
        {"name":"FOR", "level":1, "count":6, "lines":"73 76 86 89 92 17"},
        {"name":"REPEAT", "level":2, "count":1, "lines":"21"},
        {"name":"DEF PROC", "level":2, "count":4, "lines":"47 84 120 130"}
      ],
      "total":21
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCgraphit", "level":0, "count":5, "lines":"131 132 140 141 18"},
        {"name":"PROCsetup", "level":0, "count":1, "lines":"15"},
        {"name":"PROCdrawaxes", "level":0, "count":1, "lines":"16"},
        {"name":"PROCshowswap", "level":0, "count":1, "lines":"39"}
      ],
      "total":8
    }
  ],
  "pcode":[
    [112,16,1,1,112,0,123,112,6,2,123,4,112,117,124,112,133,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,24,119,23],
    [112,101,119,24],
    [128,111],
    [133,1],
    [112,0,112,0,112,100,112,21,26,112,15,26,112,100,112,2,28,112,20,26,112,10,26,144],
    [112,100,112,21,26,112,15,26,112,100,112,2,28,112,20,26,112,10,26,145],
    [112,100,112,2,28,112,20,26,112,10,26,112,1,27,119,131],
    [112,100,112,1000,112,707,48,119,132],
    [112,16711680,112,255,19,119,133],
    [112,255,87],
    [113,132,112,1,26,112,21,26,113,131,113,132,27,88],
    [112,0,113,132,90],
    [112,1,85],
    [113,132,112,21,26,113,131,113,132,27,112,10,27,88],
    [112,0,112,5,90],
    [113,132,112,21,26,112,20,88],
    [112,0,112,5,90],
    [112,16711680,87],
    [113,132,112,21,26,112,1,27,113,131,113,132,27,112,10,27,88],
    [112,0,112,5,90],
    [113,132,112,21,26,112,1,27,112,20,88],
    [112,0,112,5,90],
    [112,0,87],
    [112,21,112,1,27,113,131,88],
    [112,100,112,1,26,112,100,23,112,1,27,90],
    [112,0,87],
    [112,0,112,100,112,1,26,90],
    [112,21,112,2,26,113,131,112,16711680,97],
    [112,100,112,21,26,112,4,27,113,131,112,255,97],
    [112,0],
    [119,126,113,132,112,1,27],
    [113,126,37,129,37],
    [113,23,113,126,2,127,26,4,113,126,112,1,26,2,123],
    [113,126,4,128,33],
    [113,132],
    [119,126,112,100,112,1,27],
    [113,126,37,129,42],
    [113,23,113,126,2,127,26,4,112,0,2,123],
    [113,126,4,128,38],
    [112,0,87],
    [112,0,112,0,88],
    [118,28,68,105,102,102,117,115,105,111,110,32,105,110,32,97,32,84,97,112,101,114,105,110,103,32,84,117,98,101,112,2,112,100,112,10,29,168,142],
    [134,132],
    [133,2],
    [139,13,1],
    [117,13,1,112,1,124],
    [112,1,23],
    [120,13,1,112,50],
    [114,13,1,37,129,54],
    [112,21,112,1,27,112,80,114,13,1,27,112,0,100],
    [114,13,1,4,128,50],
    [112,0],
    [120,13,1,112,100],
    [114,13,1,37,129,59],
    [112,21,112,100,26,112,20,114,13,1,26,112,0,100],
    [114,13,1,4,128,55],
    [112,0],
    [120,13,1,112,100],
    [114,13,1,37,129,66],
    [114,13,1,112,31,34,114,13,1,112,5,31,112,0,32,18,129,64],
    [112,21,114,13,1,26,112,80,112,1,26,112,0,100],
    [112,21,114,13,1,26,112,20,112,101,26,112,0,100],
    [114,13,1,4,128,60],
    [112,0,112,50,23,90],
    [112,3978097,87],
    [112,0,112,80,112,50,27,112,100,112,15,29,27,88],
    [118,4,49,48,48,37,112,2,112,100,112,15,29,168,142],
    [112,0,112,80,112,100,112,15,29,27,88],
    [118,4,32,32,48,37,112,2,112,100,112,15,29,168,142],
    [112,0,112,20,112,100,112,11,28,112,10,29,26,88],
    [118,17,82,101,100,32,99,111,110,99,101,110,116,114,97,116,105,111,110,112,2,112,100,112,12,29,168,142],
    [112,16711680,87],
    [112,100,112,21,26,112,2,26,112,20,112,100,26,113,132,27,112,1,26,112,100,112,15,29,27,88],
    [113,132,112,1,27,11,112,2,112,100,112,15,29,168,142],
    [112,100,112,21,26,112,2,26,112,20,112,100,26,112,100,112,15,29,27,88],
    [118,3,32,32,48,112,2,112,100,112,15,29,168,142],
    [112,0,112,20,112,100,112,12,28,112,10,29,26,88],
    [118,18,82,101,100,32,109,111,108,101,99,117,108,101,32,99,111,117,110,116,112,2,112,100,112,12,29,168,142],
    [112,0,87],
    [112,0,112,20,112,100,112,13,28,112,10,29,26,112,5,26,88],
    [118,23,40,97,116,32,104,111,114,105,122,111,110,116,97,108,32,112,111,115,105,116,105,111,110,112,2,112,100,112,15,29,168,142],
    [112,0,112,20,112,100,112,14,28,112,10,29,26,112,5,26,88],
    [118,17,105,110,32,116,97,112,101,114,105,110,103,32,116,117,98,101,41,112,2,112,100,112,15,29,168,142],
    [140,13,134,132],
    [133,3],
    [139,14,2],
    [117,14,1,112,2,124,120,14,2,120,14,1],
    [114,14,2,129,94],
    [114,14,1,112,21,26,112,20,112,100,26,113,23,114,14,1,2,127,26,4,122,27,112,16711680,100],
    [114,14,1,112,21,26,112,80,113,23,114,14,1,2,127,26,4,122,114,14,1,112,1,26,112,50,48,27,112,3978097,100],
    [128,96],
    [114,14,1,112,21,26,112,20,112,100,26,113,23,114,14,1,2,127,26,4,122,27,112,16777215,100],
    [114,14,1,112,21,26,112,80,113,23,114,14,1,2,127,26,4,122,114,14,1,112,1,26,112,50,48,27,112,16777215,100],
    [140,14,134,132],
    [133,4],
    [139,15,2],
    [117,15,1,112,2,124,120,15,2,120,15,1],
    [113,126,112,0,131,87],
    [113,126,112,1,26,112,0,131,87],
    [114,15,2,112,16711680,32,129,106],
    [113,23,113,126,2,127,26,4,1,122,5,2,123],
    [113,23,113,126,112,1,26,2,127,26,4,1,122,4,2,123],
    [128,108],
    [113,23,113,126,2,127,26,4,1,122,4,2,123],
    [113,23,113,126,112,1,26,2,127,26,4,1,122,5,2,123],
    [113,126,112,-1,131,87],
    [113,126,112,1,26,112,-1,131,87],
    [140,15,134,132],
    [131,6],
    [131,46],
    [112,0],
    [119,126,112,100,112,1,27],
    [113,126,37,129,118],
    [113,126,112,-1,131,87],
    [113,126,4,128,114],
    [112,2500,174],
    [112,100,112,1,27,7,4,119,126],
    [112,100,112,1,27,7,4,119,127],
    [113,127,113,126,36,129,137],
    [113,131,113,127,27,119,127],
    [113,126,119,128],
    [113,127,119,129],
    [112,3,7,4,112,1,32,129,128],
    [116,128,1,122,4,2,123],
    [128,129],
    [116,129,1,122,5,2,123],
    [113,126,112,21,26,113,127,99,119,130],
    [113,128,112,21,26,113,129,99,113,130,19,113,133,32,129,137],
    [112,0,146],
    [113,126,112,21,26,113,127,113,128,112,21,26,113,129,99,100],
    [113,128,112,21,26,113,129,113,130,100],
    [113,128,113,126,33,129,136],
    [113,126,113,130,131,97],
    [112,-1,146],
    [112,0,112,1,32,129,119],
    [130]
  ]
}
