{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"User-defined string functions",
  "author":"Peter Millican",
  "date":"23/07/2020",
  "time":"12:00:25",
  "code":"REM UserStringFunctions\n\nOUTPUT(TRUE, CREAM, TRUE)\nWRITELN(\"Some User-Defined String Functions\")\nPROCprocess(\"the quick brown fox jumps,\")\nPROCprocess(\"OVER THE LAZY DOG.\")\nEND\n\nDEF FNreverse$(s$)\n  LOCAL posn%, t$\n  t$ = \"\"\n  FOR posn% = 1 TO LEN(s$)\n    t$ = MID$(s$, posn%, 1) + t$\n  NEXT\n= t$\n\nDEF FNrevrecurse$(s$)\n  IF s$ = \"\" THEN\n    result$ = s$\n  ELSE\n    result$ = FNrevrecurse$(DEL$(s$, 1, 1)) + MID$(s$, 1, 1)\n  ENDIF\n= result$\n\nDEF FNcasetest(s$)\n  IF (ASC(s$) >= ASC(\"A\")) AND (ASC(s$) <= ASC(\"Z\")) THEN\n    result = 1\n  ELSE\n    IF (ASC(s$) >= ASC(\"a\")) AND (ASC(s$) <= ASC(\"z\")) THEN\n      result = 0\n    ELSE\n      result = -1\n    ENDIF\n  ENDIF\n= result\n\nDEF FNinitcaps$(s$)\n  LOCAL posn%, t$, c$\n  s$ = LCASE$(s$)\n  t$ = \"\"\n  FOR posn% = 1 TO LEN(s$)\n    c$ = MID$(s$, posn%, 1)\n    IF FNcasetest(c$) = 0 THEN\n      IF posn% = 1 THEN\n        c$ = UCASE$(c$)\n      ELSE\n        IF MID$(s$, posn% - 1, 1) = \" \" THEN\n          c$ = UCASE$(c$)\n        ENDIF\n      ENDIF\n    ENDIF\n    t$ = t$ + c$\n  NEXT\n= t$\n\nDEF FNcaesar$(s$, n%)\n  LOCAL posn%, t$, c$\n  t$ = \"\"\n  FOR posn% = 1 TO LEN(s$)\n    c$ = MID$(s$, posn%, 1)\n    IF FNcasetest(c$) = 1 THEN\n      c$ = CHR$(ASC(c$) + n%)\n      IF c$ > \"Z\" THEN c$ = CHR$(ASC(c$) - 26)\n    ENDIF\n    IF FNcasetest(c$) = 0 THEN\n      c$ = CHR$(ASC(c$) + n%)\n      IF c$ > \"z\" THEN c$ = CHR$(ASC(c$) - 26)\n    ENDIF\n    t$ = t$ + c$\n  NEXT\n= t$\n\nDEF PROCprocess(s$)\n  WRITELN(\"\")\n  WRITELN(\"ORIGINAL STRING:            '\" + s$ + \"'\")\n  WRITELN(\"REVERSED (by iteration):    '\" + FNreverse$(s$) + \"'\")\n  WRITELN(\"REVERSED (by recursion):    '\" + FNrevrecurse$(s$) + \"'\")\n  WRITELN(\"INITIAL CAPITAL ALL WORDS:  '\" + FNinitcaps$(s$) + \"'\")\n  WRITELN(\"CAESAR CIPHER (1 letter):   '\" + FNcaesar$(s$, 1) + \"'\")\n  WRITELN(\"CAESAR DECRYPT (1+25 = 26): '\" + FNcaesar$(FNcaesar$(s$, 1), 25) + \"'\")\n  WRITELN(\"CAESAR CIPHER (4 letters):  '\" + FNcaesar$(s$, 4) + \"''\")\n  WRITELN(\"CAESAR DECRYPT (4+22 = 26): '\" + FNcaesar$(FNcaesar$(s$, 4), 22) + \"'\")\nENDPROC",
  "usage":[
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"OUTPUT", "level":2, "count":1, "lines":"3"}
      ],
      "total":1
    },
    {
      "category": "String operations",
      "expressions":[
        {"name":"WRITELN", "level":1, "count":10, "lines":"74 75 76 77 78 79 80 81 82 4"},
        {"name":"LCASE$", "level":2, "count":1, "lines":"39"},
        {"name":"LEN", "level":2, "count":3, "lines":"12 41 59"},
        {"name":"UCASE$", "level":2, "count":2, "lines":"45 48"},
        {"name":"DEL$", "level":3, "count":1, "lines":"21"},
        {"name":"MID$", "level":3, "count":5, "lines":"13 21 42 47 60"}
      ],
      "total":22
    },
    {
      "category": "Type conversion routines",
      "expressions":[
        {"name":"ASC", "level":3, "count":12, "lines":"26 26 26 26 29 29 29 29 62 63 66 67"},
        {"name":"CHR$", "level":3, "count":4, "lines":"62 63 66 67"}
      ],
      "total":16
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":10, "lines":"18 26 29 43 44 47 61 63 65 67"},
        {"name":"ELSE", "level":1, "count":4, "lines":"20 28 31 46"},
        {"name":"FOR", "level":1, "count":3, "lines":"12 41 59"},
        {"name":"DEF PROC", "level":2, "count":1, "lines":"73"},
        {"name":"DEF FN", "level":3, "count":5, "lines":"9 17 25 37 56"}
      ],
      "total":23
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"FNrevrecurse$", "level":0, "count":2, "lines":"21 77"},
        {"name":"FNcasetest", "level":0, "count":3, "lines":"43 61 65"},
        {"name":"FNreverse$", "level":0, "count":1, "lines":"76"},
        {"name":"FNinitcaps$", "level":0, "count":1, "lines":"78"},
        {"name":"FNcaesar$", "level":0, "count":6, "lines":"79 80 80 81 82 82"},
        {"name":"PROCprocess", "level":0, "count":2, "lines":"5 6"}
      ],
      "total":15
    }
  ],
  "pcode":[
    [112,19,1,1,112,0,123,112,6,2,123,4,112,41,124,112,60,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,28,119,26],
    [112,33,119,27],
    [128,108],
    [133,1],
    [139,12,106],
    [117,12,1,112,106,124,117,12,3,120,12,1,112,33,120,12,2,117,12,37,1,1,4,120,12,36,112,33,2,123,4,126],
    [117,12,74,120,12,72,112,33,120,12,73],
    [114,12,72,118,0,2,126,142],
    [112,1],
    [120,12,71,114,12,36,65],
    [114,12,71,37,129,16],
    [114,12,72,114,12,36,114,12,71,112,1,67,114,12,72,64,2,126,142],
    [114,12,71,4,128,12],
    [114,12,1,114,12,72,2,126],
    [113,12,119,18,140,12,134,132],
    [133,2],
    [139,13,70],
    [117,13,1,112,70,124,117,13,3,120,13,1,112,33,120,13,2,117,13,37,1,1,4,120,13,36,112,33,2,123,4,126],
    [114,13,36,118,0,40,142,129,24],
    [113,26,114,13,36,2,126],
    [128,26],
    [113,26,114,13,36,112,1,112,1,68,131,18],
    [114,18,1,8,114,13,36,112,1,112,1,67,64,2,126,142],
    [114,13,1,113,26,2,126],
    [113,13,119,18,140,13,134,132],
    [133,3],
    [139,14,36],
    [117,14,1,112,36,124,117,14,3,1,1,4,120,14,2,112,33,2,123,4,126],
    [114,14,2,10,118,1,65,10,37,114,14,2,10,118,1,90,10,36,17,142,129,34],
    [112,1,120,14,1],
    [128,38],
    [114,14,2,10,118,1,97,10,37,114,14,2,10,118,1,122,10,36,17,142,129,37],
    [112,0,120,14,1],
    [128,38],
    [112,1,23,120,14,1],
    [114,14,1,120,14,1],
    [113,14,119,18,140,14,134,132],
    [133,4],
    [139,15,141],
    [117,15,1,112,141,124,117,15,3,120,15,1,112,33,120,15,2,117,15,37,1,1,4,120,15,36,112,33,2,123,4,126],
    [117,15,74,120,15,72,112,33,120,15,73],
    [117,15,109,120,15,107,112,33,120,15,108],
    [114,15,36,114,15,36,112,1,66,2,126,142],
    [114,15,72,118,0,2,126,142],
    [112,1],
    [120,15,71,114,15,36,65],
    [114,15,71,37,129,60],
    [114,15,107,114,15,36,114,15,71,112,1,67,2,126,142],
    [114,15,107,131,28],
    [114,18,1,112,0,32,129,58],
    [114,15,71,112,1,32,129,56],
    [114,15,107,114,15,107,112,2,66,2,126,142],
    [128,58],
    [114,15,36,114,15,71,112,1,27,112,1,67,118,1,32,40,142,129,58],
    [114,15,107,114,15,107,112,2,66,2,126,142],
    [114,15,72,114,15,72,114,15,107,64,2,126,142],
    [114,15,71,4,128,48],
    [114,15,1,114,15,72,2,126],
    [113,15,119,18,140,15,134,132],
    [133,5],
    [139,16,142],
    [117,16,1,112,142,124,117,16,3,120,16,1,112,33,120,16,2,120,16,71,117,16,37,1,1,4,120,16,36,112,33,2,123,4,126],
    [117,16,75,120,16,73,112,33,120,16,74],
    [117,16,110,120,16,108,112,33,120,16,109],
    [114,16,73,118,0,2,126,142],
    [112,1],
    [120,16,72,114,16,36,65],
    [114,16,72,37,129,84],
    [114,16,108,114,16,36,114,16,72,112,1,67,2,126,142],
    [114,16,108,131,28],
    [114,18,1,112,1,32,129,77],
    [114,16,108,114,16,108,10,114,16,71,26,9,2,126,142],
    [114,16,108,118,1,90,43,142,129,77],
    [114,16,108,114,16,108,10,112,26,27,9,2,126,142],
    [114,16,108,131,28],
    [114,18,1,112,0,32,129,82],
    [114,16,108,114,16,108,10,114,16,71,26,9,2,126,142],
    [114,16,108,118,1,122,43,142,129,82],
    [114,16,108,114,16,108,10,112,26,27,9,2,126,142],
    [114,16,73,114,16,73,114,16,108,64,2,126,142],
    [114,16,72,4,128,69],
    [114,16,1,114,16,73,2,126],
    [113,16,119,18,140,16,134,132],
    [133,6],
    [139,17,35],
    [117,17,1,112,35,124,117,17,2,1,1,4,120,17,1,112,33,2,123,4,126],
    [118,0,169,170,142],
    [118,29,79,82,73,71,73,78,65,76,32,83,84,82,73,78,71,58,32,32,32,32,32,32,32,32,32,32,32,32,39,114,17,1,64,118,1,39,64,169,170,142],
    [118,29,82,69,86,69,82,83,69,68,32,40,98,121,32,105,116,101,114,97,116,105,111,110,41,58,32,32,32,32,39,114,17,1,131,6],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [118,29,82,69,86,69,82,83,69,68,32,40,98,121,32,114,101,99,117,114,115,105,111,110,41,58,32,32,32,32,39,114,17,1,131,18],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [118,29,73,78,73,84,73,65,76,32,67,65,80,73,84,65,76,32,65,76,76,32,87,79,82,68,83,58,32,32,39,114,17,1,131,40],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,67,73,80,72,69,82,32,40,49,32,108,101,116,116,101,114,41,58,32,32,32,39,114,17,1,112,1,131,62],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,68,69,67,82,89,80,84,32,40,49,43,50,53,32,61,32,50,54,41,58,32,39,114,17,1,112,1,131,62],
    [114,18,1,8,112,25,131,62],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,67,73,80,72,69,82,32,40,52,32,108,101,116,116,101,114,115,41,58,32,32,39,114,17,1,112,4,131,62],
    [114,18,1,8,64,118,2,39,39,64,169,170,142],
    [118,29,67,65,69,83,65,82,32,68,69,67,82,89,80,84,32,40,52,43,50,50,32,61,32,50,54,41,58,32,39,114,17,1,112,4,131,62],
    [114,18,1,8,112,22,131,62],
    [114,18,1,8,64,118,1,39,64,169,170,142],
    [140,17,134,132],
    [112,-1,112,16777147,112,-1,166],
    [118,34,83,111,109,101,32,85,115,101,114,45,68,101,102,105,110,101,100,32,83,116,114,105,110,103,32,70,117,110,99,116,105,111,110,115,169,170,142],
    [118,26,116,104,101,32,113,117,105,99,107,32,98,114,111,119,110,32,102,111,120,32,106,117,109,112,115,44,142,131,86],
    [118,18,79,86,69,82,32,84,72,69,32,76,65,90,89,32,68,79,71,46,142,131,86],
    [130]
  ]
}
