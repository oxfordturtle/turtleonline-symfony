{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"Multiple bouncing shapes",
  "author":"Peter Millican",
  "date":"23/07/2020",
  "time":"12:00:26",
  "code":"REM BouncingShapes\n\nCONST MINSIZE% = 70\nCONST MAXSIZE% = 130\nCONST SHAPES% = 6\nDIM x%(SHAPES%)\nDIM y%(SHAPES%)\nDIM d%(SHAPES%)\nDIM xvel%(SHAPES%)\nDIM yvel%(SHAPES%)\nDIM dvel%(SHAPES%)\nDIM sides%(SHAPES%)\nDIM size%(SHAPES%)\nDIM colr%(SHAPES%)\nFOR n% = 1 TO SHAPES%\n  sides%(n%) = n% + 2\n  size%(n%) = MINSIZE% + RND(MAXSIZE% - MINSIZE%)\n  colr%(n%) = RGB(n%)\n  x%(n%) = RND(1000 - 2 * size%(n%)) + size%(n%)\n  y%(n%) = RND(1000 - 2 * size%(n%)) + size%(n%)\n  d%(n%) = RND(360)\n  xvel%(n%) = RND(15) - 7\n  yvel%(n%) = RND(15) - 7\n  dvel%(n%) = RND(4) + 3\nNEXT\nWHILE 0 < 1\n  NOUPDATE\n  BLANK(WHITE)\n  FOR n% = 1 TO SHAPES%\n    x%(n%) = x%(n%) + xvel%(n%)\n    y%(n%) = y%(n%) + yvel%(n%)\n    d%(n%) = (d%(n%) + dvel%(n%)) MOD 360\n    SETXY(x%(n%), y%(n%))\n    DIRECTION(d%(n%))\n    PROCdrawshape(sides%(n%), size%(n%), colr%(n%))\n    IF bouncex% THEN\n      xvel%(n%) = -xvel%(n%)\n      dvel%(n%) = -dvel%(n%)\n    ENDIF\n    IF bouncey% THEN\n      yvel%(n%) = -yvel%(n%)\n      dvel%(n%) = -dvel%(n%)\n    ENDIF\n  NEXT\n  UPDATE\n  PAUSE(5)\nENDWHILE\nEND\n\nDEF PROCdrawshape(sid%, siz%, col%)\n  LOCAL count%\n  bouncex% = FALSE\n  bouncey% = FALSE\n  COLOUR(col%)\n  FOR count% = 1 TO sid%\n    FORWARD(siz%)\n    IF ABS(turtx% - 500) > 495 THEN\n      bouncex% = TRUE\n    ENDIF\n    IF ABS(turty% - 500) > 495 THEN\n      bouncey% = TRUE\n    ENDIF\n    BACK(siz%)\n    FORGET(1)\n    RIGHT(360 / sid%)\n  NEXT\n  POLYGON(sid%)\nENDPROC",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"BACK", "level":1, "count":1, "lines":"63"},
        {"name":"FORWARD", "level":1, "count":1, "lines":"56"},
        {"name":"RIGHT", "level":1, "count":1, "lines":"65"}
      ],
      "total":3
    },
    {
      "category": "Turtle: absolute movement",
      "expressions":[
        {"name":"DIRECTION", "level":1, "count":1, "lines":"34"},
        {"name":"SETXY", "level":1, "count":1, "lines":"33"}
      ],
      "total":2
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"FORGET", "level":2, "count":1, "lines":"64"},
        {"name":"POLYGON", "level":2, "count":1, "lines":"67"}
      ],
      "total":2
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"COLOUR", "level":1, "count":1, "lines":"54"},
        {"name":"RGB", "level":3, "count":1, "lines":"18"}
      ],
      "total":2
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"BLANK", "level":1, "count":1, "lines":"28"},
        {"name":"NOUPDATE", "level":1, "count":1, "lines":"27"},
        {"name":"UPDATE", "level":1, "count":1, "lines":"45"}
      ],
      "total":3
    },
    {
      "category": "General arithmetic functions",
      "expressions":[
        {"name":"ABS", "level":1, "count":2, "lines":"57 60"},
        {"name":"RND", "level":2, "count":7, "lines":"17 19 20 21 22 23 24"}
      ],
      "total":9
    },
    {
      "category": "Input and timing routines",
      "expressions":[
        {"name":"PAUSE", "level":1, "count":1, "lines":"46"}
      ],
      "total":1
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":4, "lines":"57 60 36 40"},
        {"name":"FOR", "level":1, "count":3, "lines":"55 15 29"},
        {"name":"WHILE", "level":2, "count":1, "lines":"26"},
        {"name":"DEF PROC", "level":2, "count":1, "lines":"50"}
      ],
      "total":9
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCdrawshape", "level":0, "count":1, "lines":"35"}
      ],
      "total":1
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,90,124,112,103,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [116,21,119,20],
    [112,7,119,21],
    [116,30,119,29],
    [112,7,119,30],
    [116,39,119,38],
    [112,7,119,39],
    [116,48,119,47],
    [112,7,119,48],
    [116,57,119,56],
    [112,7,119,57],
    [116,66,119,65],
    [112,7,119,66],
    [116,75,119,74],
    [112,7,119,75],
    [116,84,119,83],
    [112,7,119,84],
    [116,93,119,92],
    [112,7,119,93],
    [128,42],
    [133,1],
    [139,12,4],
    [117,12,1,112,4,124,120,12,3,120,12,2,120,12,1],
    [112,0,119,102],
    [112,0,119,103],
    [114,12,3,87],
    [112,1],
    [120,12,4,114,12,1],
    [114,12,4,37,129,40],
    [114,12,2,91],
    [113,14,112,500,27,24,112,495,35,129,34],
    [112,-1,119,102],
    [113,15,112,500,27,24,112,495,35,129,36],
    [112,-1,119,103],
    [114,12,2,92],
    [112,1,104],
    [112,360,114,12,1,29,94],
    [114,12,4,4,128,29],
    [114,12,1,106],
    [140,12,134,132],
    [112,1],
    [119,101,112,6],
    [113,101,37,129,55],
    [113,74,113,101,2,127,26,4,113,101,112,2,26,2,123],
    [113,83,113,101,2,127,26,4,112,70,112,130,112,70,27,7,4,26,2,123],
    [113,92,113,101,2,127,26,4,113,101,101,2,123],
    [113,20,113,101,2,127,26,4,112,1000,112,2,113,83,113,101,2,127,26,4,122,28,27,7,4,113,83,113,101,2,127,26,4,122,26,2,123],
    [113,29,113,101,2,127,26,4,112,1000,112,2,113,83,113,101,2,127,26,4,122,28,27,7,4,113,83,113,101,2,127,26,4,122,26,2,123],
    [113,38,113,101,2,127,26,4,112,360,7,4,2,123],
    [113,47,113,101,2,127,26,4,112,15,7,4,112,7,27,2,123],
    [113,56,113,101,2,127,26,4,112,15,7,4,112,7,27,2,123],
    [113,65,113,101,2,127,26,4,112,4,7,4,112,3,26,2,123],
    [113,101,4,128,43],
    [112,0,112,1,34,129,77],
    [112,0,146],
    [112,16777215,96],
    [112,1],
    [119,101,112,6],
    [113,101,37,129,74],
    [113,20,113,101,2,127,26,4,113,20,113,101,2,127,26,4,122,113,47,113,101,2,127,26,4,122,26,2,123],
    [113,29,113,101,2,127,26,4,113,29,113,101,2,127,26,4,122,113,56,113,101,2,127,26,4,122,26,2,123],
    [113,38,113,101,2,127,26,4,113,38,113,101,2,127,26,4,122,113,65,113,101,2,127,26,4,122,26,112,360,31,2,123],
    [113,20,113,101,2,127,26,4,122,113,29,113,101,2,127,26,4,122,88],
    [113,38,113,101,2,127,26,4,122,83],
    [113,74,113,101,2,127,26,4,122,113,83,113,101,2,127,26,4,122,113,92,113,101,2,127,26,4,122,131,22],
    [113,102,129,70],
    [113,47,113,101,2,127,26,4,113,47,113,101,2,127,26,4,122,23,2,123],
    [113,65,113,101,2,127,26,4,113,65,113,101,2,127,26,4,122,23,2,123],
    [113,103,129,73],
    [113,56,113,101,2,127,26,4,113,56,113,101,2,127,26,4,122,23,2,123],
    [113,65,113,101,2,127,26,4,113,65,113,101,2,127,26,4,122,23,2,123],
    [113,101,4,128,59],
    [112,-1,146],
    [112,5,174],
    [128,55],
    [130]
  ]
}
