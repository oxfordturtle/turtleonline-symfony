{
  "format":1,
  "language":"BASIC",
  "version":13,
  "name":"Recursion factory",
  "author":"Peter Millican",
  "date":"28/07/2020",
  "time":"13:25:40",
  "code":"REM RecursionFactory\n\nCONST NUMSIDES%=6\nCONST INITSIZE%=240\nCONST SHRINK%=40\nCONST RANGLE%=180\nCONST POLYGAP%=0\nCONST LEVELS%=5\nCONST SLOWDRAW%=3\nCONST MODE%=1\nCONST FIRSTCOL%=1\nCONST COLINC%=2\nCONST MINTHICK%=2\nCONST ADDTHICK%=6\nCONST CIRCSIZE%=60\nBLANK(BLACK)\nIF 180 MOD NUMSIDES%=0 THEN\n halfangle%=90-(180/NUMSIDES%)\n slowlev%=LEVELS%+1-SLOWDRAW%\n IF slowlev%>LEVELS%-1 THEN slowlev%=LEVELS%-1\n MOVEXY(0,INITSIZE%)\n PROCrecurse(1,INITSIZE%,LEVELS%,FIRSTCOL%)\nENDIF\nEND\n\nDEF PROCrecurse(flag%,size%,depth%,col%)\n LOCAL storex%,storey%,sides%\n IF depth%>0 THEN\n  IF depth%<slowlev% THEN NOUPDATE ELSE UPDATE\n  IF flag%=1 THEN\n   FOR flag%=2 TO 3\n    storex%=turtx%\n    storey%=turty%\n    FOR sides%=1 TO NUMSIDES%\n     PROCrecurse(flag%,size%,depth%,col%)\n    NEXT\n    turtx%=storex%\n    turty%=storey%\n   NEXT\n  ELSE\n   PENUP\n   IF flag%=2 THEN\n    COLOUR(RGB(col%))\n    THICKNESS(MINTHICK%+((depth%-1)*ADDTHICK%)/12)\n    IF MODE%=1 THEN\n     PENDOWN\n    ELSE\n     IF MODE%=2 THEN\n      BLOT(size%*CIRCSIZE%/120)\n     ELSE\n      CIRCLE(size%*CIRCSIZE%/120)\n     ENDIF\n    ENDIF\n   ENDIF\n   LEFT(halfangle%)\n   FORWARD(size%)\n   RIGHT(180-halfangle%+RANGLE%)\n   IF flag%=3 THEN\n    FORWARD(size%*POLYGAP%/120)\n    PROCrecurse(1,(size%*SHRINK%)/120,depth%-1,((col%+COLINC%-1) MOD 7)+1)\n    BACK(size%*POLYGAP%/120)\n   ENDIF\n   LEFT(RANGLE%)\n  ENDIF\n ENDIF\nENDPROC",
  "usage":[
    {
      "category": "Turtle: relative movement",
      "expressions":[
        {"name":"BACK", "level":1, "count":1, "lines":"61"},
        {"name":"FORWARD", "level":1, "count":2, "lines":"56 59"},
        {"name":"LEFT", "level":1, "count":2, "lines":"55 63"},
        {"name":"RIGHT", "level":1, "count":1, "lines":"57"},
        {"name":"MOVEXY", "level":2, "count":1, "lines":"21"}
      ],
      "total":7
    },
    {
      "category": "Turtle: drawing shapes",
      "expressions":[
        {"name":"BLOT", "level":1, "count":1, "lines":"49"},
        {"name":"CIRCLE", "level":1, "count":1, "lines":"51"}
      ],
      "total":2
    },
    {
      "category": "Other Turtle commands",
      "expressions":[
        {"name":"COLOUR", "level":1, "count":1, "lines":"43"},
        {"name":"PENDOWN", "level":1, "count":1, "lines":"46"},
        {"name":"PENUP", "level":1, "count":1, "lines":"41"},
        {"name":"THICKNESS", "level":1, "count":1, "lines":"44"},
        {"name":"RGB", "level":3, "count":1, "lines":"43"}
      ],
      "total":5
    },
    {
      "category": "Canvas operations",
      "expressions":[
        {"name":"BLANK", "level":1, "count":1, "lines":"16"},
        {"name":"NOUPDATE", "level":1, "count":1, "lines":"29"},
        {"name":"UPDATE", "level":1, "count":1, "lines":"29"}
      ],
      "total":3
    },
    {
      "category": "Command structures",
      "expressions":[
        {"name":"IF", "level":1, "count":9, "lines":"28 29 30 42 45 48 58 17 20"},
        {"name":"ELSE", "level":1, "count":4, "lines":"29 40 47 50"},
        {"name":"FOR", "level":1, "count":2, "lines":"31 34"},
        {"name":"DEF PROC", "level":2, "count":1, "lines":"26"}
      ],
      "total":16
    },
    {
      "category": "Subroutine calls",
      "expressions":[
        {"name":"PROCrecurse", "level":0, "count":3, "lines":"35 60 22"}
      ],
      "total":3
    }
  ],
  "pcode":[
    [112,13,1,1,112,0,123,112,6,2,123,4,112,8,124,112,21,138],
    [80,112,2,85,112,360,84,112,32,162,112,1,123,141,112,0,1,112,1000,1,1,1,145,144],
    [128,47],
    [133,1],
    [139,12,7],
    [117,12,1,112,7,124,120,12,4,120,12,3,120,12,2,120,12,1],
    [114,12,3,112,0,35,129,46],
    [114,12,3,113,21,34,129,11],
    [112,0,146],
    [128,12],
    [112,-1,146],
    [114,12,1,112,1,32,129,27],
    [112,2],
    [120,12,1,112,3],
    [114,12,1,37,129,26],
    [113,14,120,12,5],
    [113,15,120,12,6],
    [112,1],
    [120,12,7,112,6],
    [114,12,7,37,129,23],
    [114,12,1,114,12,2,114,12,3,114,12,4,131,4],
    [114,12,7,4,128,19],
    [114,12,5,119,14],
    [114,12,6,119,15],
    [114,12,1,4,128,14],
    [128,46],
    [112,0,86],
    [114,12,1,112,2,32,129,38],
    [114,12,4,101,87],
    [112,2,114,12,3,112,1,27,112,6,28,112,12,29,26,85],
    [112,1,112,1,32,129,34],
    [112,-1,86],
    [128,38],
    [112,1,112,2,32,129,37],
    [114,12,2,112,60,28,112,120,29,108],
    [128,38],
    [114,12,2,112,60,28,112,120,29,107],
    [113,20,93],
    [114,12,2,91],
    [112,180,113,20,27,112,180,26,94],
    [114,12,1,112,3,32,129,45],
    [114,12,2,112,0,28,112,120,29,91],
    [112,1,114,12,2,112,40,28,112,120,29,114,12,3,112,1,27,114,12,4,112,2,26,112,1,27,112,7,31,112,1,26,131,4],
    [114,12,2,112,0,28,112,120,29,92],
    [112,180,93],
    [140,12,134,132],
    [112,0,96],
    [112,180,112,6,31,112,0,32,129,55],
    [112,90,112,180,112,6,29,27,119,20],
    [112,5,112,1,26,112,3,27,119,21],
    [113,21,112,5,112,1,27,35,129,53],
    [112,5,112,1,27,119,21],
    [112,0,112,240,89],
    [112,1,112,240,112,5,112,1,131,4],
    [130]
  ]
}
